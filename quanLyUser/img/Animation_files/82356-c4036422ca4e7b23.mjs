(self.modernJsonp=self.modernJsonp||[]).push([["82356"],{201563(e,t,i){i.r(t),i.d(t,{default:()=>r});let o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"hasSensitivityNotices_sensitivity",selections:[{alias:null,args:null,concreteType:"AdvisoryNotice",kind:"LinkedField",name:"notices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"advisory",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"severity",storageKey:null}],type:"Sensitivity",abstractKey:null};o.hash="547e5abdb645851996d6a1b1a4027c56";let r=o},836664(e,t,i){i.d(t,{Q:()=>v,x:()=>x});var o=i(859471),r=i(393807),a=i(702949),l=i(224723),n=i(106301),s=i(392026),d=i(149562),c=i(156508),u=i(427403),_=i(319491),p=i(987628),h=i(33658),f=i(62963),m=i(307424),b=i(562615);let g=(e,t,i)=>{let o=t?.find(({action:e})=>e?.filter?.product_filter_type===i);if(!o)return;let r=(0,f.A)(m.A,!0)(o),a=e.findIndex(({action:e})=>e?.filter?.productFilterType===i);e[a]?e[a]=r:e.push(r)},A=(e,t,i,o)=>{let r=o.find(({action:t})=>"number"==typeof t?.filter?.productFilterType&&e.has(t.filter.productFilterType));if(r?.action?.filter){let e=r.action.filter.filterOptions;r.action.filter.appliedFilterOptions="string"==typeof t?e?.filter(e=>e?.[i]&&t.split(",").includes(String(e[i]))).map(e=>({...e,selected:!0})):[]}},{Provider:y,get:x}=(0,p.A)("OneBarProductFilters");function v({children:e}){let[t,i]=(0,o.useState)([]),[p,f]=(0,o.useState)(null),m=function(){let{scope:e}=(0,n.u)();return[l.cO.BOARDS,l.cO.PINS_BUYABLE,l.cO.PINS_VIDEO,l.cO.USERS].includes(e)}(),x=(0,u.A)(),v=(0,d.A)(),w=(0,r.A)(),j=(0,a.A)(),P=(0,c.A)(),B=(0,o.useCallback)(({oneBarModules:e,baseCacheKey:o})=>{let r=e?.filter(({module_type:e})=>17===e||0===e);if(!r||r?.length===0||!o)return;let a=o!==p,l=a?[]:t;(a||!m)&&g(l,r,4),(a||!x)&&g(l,r,1),(a||!v)&&g(l,r,0),(a||!w)&&g(l,r,3),(a||!j)&&g(l,r,6),(a||!P)&&[7,8,9].forEach(e=>{g(l,r,e)}),(0,h.Ay)(l,t)||(i(l),f(o))},[t,w,j,m,v,P,x,p]),C=(0,s.A)(),{priceMax:S,priceMin:z,scope:I,brands:E,onSale:O,colors:T,domains:F}=(0,n.u)();(0,o.useEffect)(()=>{if(!C||0===t.length)return;let e=(0,_.A)(t);if(I!==l.cO.PINS){let t=(0,l.Ef)(I),i=e.find(({moduleType:e})=>0===e);i?.action?.filter&&(i.action.filter.appliedFilterOptions=[...i.action.filter.filterOptions||[]].filter(Boolean).map(e=>{let{searchType:i}=e;return{searchType:i,selected:i===t}}))}if("string"==typeof S||"string"==typeof z){let t=e.find(({action:e})=>e?.filter?.productFilterType===1);t?.action?.filter&&(t.action.filter.appliedFilterOptions=[t.action.filter.filterOptions?.[0]?{...t.action.filter.filterOptions[0],numericValue:Number(z)}:null,t.action.filter.filterOptions?.[1]?{...t.action.filter.filterOptions[1],numericValue:Number(S)}:null].filter(Boolean))}A(new Set([3]),E,"stringValue",e),A(new Set([6]),T,"stringValue",e),A(new Set([0]),F,"stringValue",e),A(new Set([7,8,9]),O,"numericValue",e),(0,h.Ay)(e,t)||i(e)},[t,C,S,z,I,E,T,F,O]);let k=(0,o.useMemo)(()=>({cachedProductFilterOneBarModules:t,cacheOneBarModules:B}),[t,B]);return(0,b.jsx)(y,{value:k,children:e})}},874929(e,t,i){i.d(t,{Kq:()=>w,bn:()=>j,N_:()=>P});var o=i(859471),r=i(739428),a=i(406218),l=i(253913);let n=(e,t,i)=>i&&(0,a.BP)(i,t)?r.c.MODIFIED:(0,a.TN)(t,e)||i&&(0,a.oA)(i,e)||(0,a.oA)(t,e)?r.c.CLEARED:r.c.APPLIED;function s(e,t){(0,a.i2)(t);let i=e.find(e=>e?.id===t.id),o=i?.rules,r=i?.filter_options?.find(e=>"selectedOptionId"in t&&e.id===t.selectedOptionId)?.rules||o;if(!r)return[e,[]];let l=[],n=[];return e.forEach(e=>{void 0!==e.product_filter_type&&r.includes(e.product_filter_type)?l.push(e):n.push(e)}),[l,n]}function d(e,t){switch(t.type){case"RESET_FILTERS":let[i,o]=t.payload,d=i,c=(0,l.A)(o)?(0,a.$M)(i):o;return Object.values(c).forEach(e=>{let[t]=s(d,e);d=t}),{models:i,availableFilterModels:d,appliedFilters:o,filters:c,isFetching:!1,pendingDeletedSelections:{},status:n(i,o,c)};case"CLEAR_FILTERS":let u=e.models,_=(0,a.Oj)(e.models);return Object.values(_).forEach(e=>{let[t]=s(u,e);u=t}),{...e,filters:_,availableFilterModels:u,pendingDeletedSelections:{},status:n(e.models,e.appliedFilters,_)};case"UPDATE_FILTER":let{payload:p}=t,[h,f]=s(e.models,p),m={...e.filters,[p.id]:p},b={...e.pendingDeletedSelections};return h.forEach(e=>{if(!e.id)return;let t=b[e.id];t&&(m[e.id]=t,delete b[e.id])}),f.forEach(e=>{if(!e.id)return;let t=m[e.id];t&&(b[e.id]=t,delete m[e.id])}),(0,a.i2)(p,e.models.find(e=>e.id===p.id))&&delete m[p.id],{...e,availableFilterModels:h,filters:m,pendingDeletedSelections:b,status:n(e.models,e.appliedFilters,m)};case"SUBMIT_FILTER":return{...e,pendingDeletedSelections:{},status:r.c.SUBMITTED};case"SUBMIT_FAILED":return{...e,status:r.c.FAILED};case"SUBMIT_COMPLETE":let{filters:g}=e;return{...e,appliedFilters:g,pendingDeletedSelections:{},status:n(e.models,g)};case"LOADING":return{...e,isFetching:!0};case"LOADING_COMPLETED_OR_FAILED":return{...e,isFetching:!1};default:return e}}var c=i(393807),u=i(702949),_=i(149562),p=i(156508),h=i(427403),f=i(33658);let m=new Set([1,0,3,6,7,8,9]),b=(e,t,i)=>{let o=t?.find(({product_filter_type:e})=>e===i);if(!o)return;let r=e.findIndex(({product_filter_type:e})=>e===i);e[r]?e[r]=o:e.push(o)},g=(e,t,i)=>{let o=t?.find(({product_filter_type:e})=>e===i);if(!o)return e;let r=e.findIndex(({product_filter_type:e})=>e===i);return e[r]?e[r]=o:e.push(o),e};var A=i(392026),y=i(987628),x=i(106301),v=i(562615);let{Provider:w,getMaybe:j}=(0,y.A)("UnifiedFiltersContext"),P=({applyInitFilters:e,children:t,filterModels:i,filters:l,isFetching:n,refreshFiltersData:s})=>{let{query:y}=(0,x.u)(),j=(0,A.A)(),{getCachedFilters:P,cacheUnifiedFilterModelsWithProductFilters:B}=function(){let[e,t]=(0,o.useState)([]),[i,r]=(0,o.useState)(null),a=(0,h.A)(),l=(0,_.A)(),n=(0,c.A)(),s=(0,u.A)(),d=(0,p.A)(),A=(0,o.useCallback)(({unifiedFilterModels:o,baseCacheKey:c})=>{let u=o?.filter(({product_filter_type:e})=>void 0!==e&&m.has(e));if(!u||u?.length===0||!c)return;let _=c!==i,p=_?[]:e;(_||!a)&&b(p,u,1),(_||!l)&&b(p,u,0),(_||!n)&&b(p,u,3),(_||!s)&&b(p,u,6),(_||!d)&&[7,8,9].forEach(e=>{b(p,u,e)}),(0,f.Ay)(p,e)||(t(p),r(c))},[e,n,s,l,d,a,i]);return{getCachedFilters:(0,o.useCallback)(t=>{if(!t||t?.length===0)return[];let i=[...t];return a&&(i=g(i,e,1)),l&&(i=g(i,e,0)),n&&(i=g(i,e,3)),s&&(i=g(i,e,6)),d&&[7,8,9].forEach(t=>{i=g(i,e,t)}),i},[e,n,s,l,d,a]),cacheUnifiedFilterModelsWithProductFilters:A}}(),C=e?.(i)||l||{},[S,z]=(0,o.useReducer)(d,{models:i,availableFilterModels:i,appliedFilters:C,filters:C,pendingDeletedSelections:{},isFetching:n,status:(0,a.TN)(C,i)||(0,a.oA)(C,i)?r.c.CLEARED:r.c.APPLIED}),[I,E]=(0,o.useState)(i);(0,o.useEffect)(()=>{n&&z({type:"LOADING"})},[n]),(0,o.useEffect)(()=>{if(n||S.isFetching&&0===i.length)return;if(!(0,a.Sp)(I,i))return void z({type:"LOADING_COMPLETED_OR_FAILED"});let t=i;j||(t=P([...i]),B({unifiedFilterModels:[...i],baseCacheKey:y})),z({type:"RESET_FILTERS",payload:[t,e?.(t)||{}]}),E(i)},[e,i,I,n,S.isFetching,P,B,y,j]);let O=(0,o.useMemo)(()=>({filterState:S,dispatch:z,refreshFiltersData:s}),[S,s]);return(0,v.jsx)(w,{value:O,children:t})}},739428(e,t,i){i.d(t,{c:()=>o});let o={APPLIED:"applied",CLEARED:"cleared",MODIFIED:"modified",SUBMITTED:"submitted",FAILED:"failed"}},607126(e,t,i){i.d(t,{A:()=>c});var o=i(836664),r=i(874929),a=i(406218),l=i(62963),n=i(5302),s=i(307079),d=i(106301);function c(){let{brands:e,colors:t,domains:i,onSale:c,priceMax:u,priceMin:_}=(0,d.u)(),p=(0,r.bn)(),{cachedProductFilterOneBarModules:h}=(0,o.x)(),f=Number((0,s.A)().filter_location);if(1===f){let{filterState:e}=p||{};return e?(0,a.Iz)(e.appliedFilters,e.models):null}if(0===f){let o=(0,l.A)(n.A,!0)(h.map(e=>e.action?.filter).filter(Boolean));return(0,a.th)({brandsParam:e,colorsParam:t,domainsParam:i,onSaleParam:c,priceMaxParam:u,priceMinParam:_,unifiedFilterModels:o})}return null}},393807(e,t,i){i.d(t,{A:()=>a});var o=i(979638),r=i(803489);function a(){return!!(0,r.A)((0,o.zy)().search).brands}},702949(e,t,i){i.d(t,{A:()=>l});var o=i(979638),r=i(601185),a=i(803489);function l(){let{checkExperiment:e}=(0,r.A)(),t=(0,o.zy)(),{colors:i}=(0,a.A)(t.search);return!!i&&!!e("shopping_onebar_color_filter",{dangerouslySkipActivation:!0}).anyEnabled}},392026(e,t,i){i.d(t,{A:()=>r});var o=i(601185);function r(){let{checkExperiment:e}=(0,o.A)();return e("dweb_search_shopping_filter_sds_dep_removal_v2",{dangerouslySkipActivation:!0}).anyEnabled}},149562(e,t,i){i.d(t,{A:()=>a});var o=i(979638),r=i(803489);function a(){return!!(0,r.A)((0,o.zy)().search).domains}},427403(e,t,i){i.d(t,{A:()=>a});var o=i(979638),r=i(803489);function a(){let e=(0,o.zy)(),{price_max:t,price_min:i}=(0,r.A)(e.search);return!!(i??t)}},406218(e,t,i){i.d(t,{$M:()=>p,A:()=>x,BP:()=>s,CX:()=>j,Iz:()=>A,Oj:()=>h,ST:()=>m,Sp:()=>d,TN:()=>u,Vr:()=>w,b_:()=>g,ch:()=>y,i2:()=>c,oA:()=>_,th:()=>b,vd:()=>v});var o=i(33658),r=i(224723);let a=e=>e.map(({filter_component_type:e,filter_options:t,title:i})=>({filter_component_type:e,filter_options:t?.map(({id:e,label:t,count:i,image_url:o,is_verified:r,numeric_value:a,string_value:l,unit:n})=>({id:e,label:t,count:i,image_url:o,is_verified:r,numeric_value:a,string_value:l,unit:n})),title:i})),l=(e,t)=>{if(!e&&!t)return!1;if(!e||!t)return!0;if("single"===e.type&&"single"===t.type)return e.selectedOptionId!==t.selectedOptionId;if("multi"===e.type&&"multi"===t.type)return!(0,o.Ay)(e.selectedOptionIds,t.selectedOptionIds);if("range"===e.type&&"range"===t.type)return e.min!==t.min||e.max!==t.max;throw Error("Filter type specific return must be specified")},n=e=>!e||!Object.keys(e).length,s=(e,t)=>{if(n(e)&&n(t))return!1;if(n(e)||n(t)||e&&t&&Object.entries(e).length!==Object.entries(t).length)return!0;for(let i in e)if(l(e[i],t?.[i]))return!0;return!1},d=(e,t)=>!(0,o.Ay)(a(e),a(t)),c=(e,t)=>{if("single"===e.type)return!e.selectedOptionId;if("multi"===e.type)return 0===e.selectedOptionIds.size;if("range"===e.type)return!!t?.filter_options&&e.min===t.filter_options[0]?.numeric_value&&e.max===t.filter_options[2]?.numeric_value;throw Error("Filter type specific return must be specified")},u=(e,t)=>{try{for(let i in e){let o=e[i],r=t.find(e=>e.id===o?.id);if(o&&!c(o,r))return!1}return!0}catch(e){return!0}},_=(e,t)=>{if(!t||0===t.length)return!1;let i=t[0];if(!i)return!1;switch(i?.filter_component_type){case 2:let o=i.filter_options?.[0];for(let t in e){let i=e[t];if(!i)break;if("selectedOptionId"in i&&i.selectedOptionId===o?.id)return!0}return!1;case 1:for(let t in e){let o=e[t];if(!o)break;if(o.id===i.id&&"selectedOptionIds"in o&&0===o.selectedOptionIds.size)return!0}return!1;default:return!1}},p=e=>e.map(e=>{switch(e.filter_component_type){case 2:let t=e.filter_options?.find(e=>e.is_selected)?.id;return t?{selectedOptionId:t,id:e.id,type:"single"}:null;case 1:let i=e.filter_options?.filter(e=>e.is_selected).map(({id:e})=>e);return i&&i.length>0?{selectedOptionIds:new Set(i),id:e.id,type:"multi"}:null;default:return null}}).reduce((e,t)=>t?{...e,[t.id]:t}:e,{}),h=e=>{if(!e||0===e.length)return{};let t=e[0];switch(t?.filter_component_type){case 2:let i=t.filter_options?.[0]?.id;return i&&"string"==typeof t.id?{[t.id]:{selectedOptionId:i,lastChangedLocation:1,id:t.id,type:"single"}}:{};case 1:return"string"==typeof t.id?{[t.id]:{selectedOptionIds:new Set,lastChangedLocation:1,id:t.id,type:"multi"}}:{};default:return{}}},f=e=>e.map(e=>{let{filter_id:t,filter_options:i,product_filter_type:o}=e,r=t;return"number"==typeof o&&(r+=`_${o}`),i.length>0&&(r+=":",i.forEach((e,t)=>{let{filter_option_id:o,numeric_value:a,string_value:l,unit:n}=e;r+=`${o}`,"number"==typeof a&&(r+=`_${a}`),"string"==typeof l&&(r+=`_${l}`),"string"==typeof n&&(r+=`_${n}`),t<i.length-1&&(r+=",")})),r}).join("|"),m=({brands:e,colors:t,domains:i,onSale:o,priceMax:a,priceMin:l,scope:n,unifiedFilterModels:s})=>{let d={};for(let{filter_options:c,id:u,product_filter_type:_}of s)if(u&&c?.length){if(1===_&&("number"==typeof l||"number"==typeof a)){let[e,t,i,o]=c,r=l??i?.numeric_value??e?.numeric_value??0,n=a??o?.numeric_value??t?.numeric_value??100;d[u]={min:r,max:n,id:u,type:"range",lastChangedLocation:1}}if(0===_&&i&&i.length>0){let e=i.map(e=>{let t=c.find(({string_value:t})=>t===e);return t?t.id:null}).filter(Boolean);e.length>0&&(d[u]={id:u,lastChangedLocation:1,selectedOptionIds:new Set(e),type:"multi"})}if(3===_&&e&&e.length>0){let t=e.map(e=>{let t=c.find(({string_value:t})=>t===e);return t?t.id:null}).filter(Boolean);t.length>0&&(d[u]={id:u,lastChangedLocation:1,selectedOptionIds:new Set(t),type:"multi"})}if(6===_&&t&&t.length>0){let e=t.map(e=>{let t=c.find(({string_value:t})=>t===e);return t?t.id:null}).filter(Boolean);e.length>0&&(d[u]={id:u,lastChangedLocation:1,selectedOptionIds:new Set(e),type:"multi"})}if(4===_&&n){let e=(0,r.Ef)(n),t=c.find(({search_type:t})=>t===e);t?.id&&(d[u]={id:u,lastChangedLocation:1,selectedOptionId:t.id,type:"single"})}if("number"==typeof _&&new Set([7,8,9]).has(_)&&o){let e=c[0]?.id;e&&(d[u]={id:u,lastChangedLocation:1,selectedOptionId:e,type:"single"})}}return d},b=({brandsParam:e,colorsParam:t,domainsParam:i,onSaleParam:o,priceMaxParam:r,priceMinParam:a,unifiedFilterModels:l})=>{let n=[],s=Number(a),d=Number(r),c=Number.isNaN(s)?void 0:s,u=Number.isNaN(d)?void 0:d,_=i?.split(",").filter(Boolean)??[],p=e?.split(",").filter(Boolean)??[],h=t?.split(",").filter(Boolean)??[];for(let{filter_options:e,id:t,product_filter_type:i}of l)if(t&&e?.length){if(1===i&&"number"==typeof c&&"number"==typeof u){let o={filter_id:t,filter_options:e.slice(0,2).filter(e=>void 0!==e.id).map((e,t)=>({filter_option_id:e.id,numeric_value:0===t?c:u,unit:e.unit||"USD"})),location:0,product_filter_type:i};n.push(o)}if(0===i&&_&&_.length>0){let o=_.map(t=>{let i=e.find(e=>e.string_value===t);return i?i.id:null}).filter(Boolean);if(o.length>0){let e={filter_id:t,filter_options:o.map(e=>({filter_option_id:e,string_value:e})),location:0,product_filter_type:i};n.push(e)}}if(3===i&&p&&p.length>0){let o=p.map(t=>{let i=e.find(e=>e.string_value===t);return i?i.id:null}).filter(Boolean);if(o.length>0){let e={filter_id:t,filter_options:o.map(e=>({filter_option_id:e,string_value:e})),location:0,product_filter_type:i};n.push(e)}}if(6===i&&h&&h.length>0){let o=h.map(t=>{let i=e.find(e=>e.string_value?.toLowerCase()===t.toLowerCase());return i?i.id:null}).filter(Boolean);if(o.length>0){let e={filter_id:t,filter_options:o.map(e=>({filter_option_id:e,string_value:e})),location:0,product_filter_type:i};n.push(e)}}if(7===i&&o){let r=e[0]?.id;if(r){let e={filter_id:t,filter_options:[{filter_option_id:r,numeric_value:Number(o)}],location:0,product_filter_type:i};n.push(e)}}}return 0===n.length?null:f(n)},g=({filterMap:e,isInWebHundredPercentProductLoadExp:t,models:i})=>{let o=null,a=null,l=!1,n=null,s=null,d=null,c=null,u=null;for(let _ in e){let p=e[_];if(p){let e=i.find(e=>e.id===p.id);if(e)if("range"===p.type&&1===e.product_filter_type)d=p.min,s=p.max;else if("multi"===p.type&&0===e.product_filter_type){let t=e.filter_options?.filter(e=>p.selectedOptionIds.has(e.id||""));n=t?.map(e=>e.string_value).filter(Boolean)}else if("multi"===p.type&&3===e.product_filter_type){let t=e.filter_options?.filter(e=>p.selectedOptionIds.has(e.id||""));o=t?.map(e=>e.string_value).filter(Boolean)}else if("multi"===p.type&&6===e.product_filter_type){let t=e.filter_options?.filter(e=>p.selectedOptionIds.has(e.id||""));a=t?.map(e=>e.string_value).filter(Boolean)}else if("single"===p.type&&4===e.product_filter_type){let i=e.filter_options?.find(e=>p.selectedOptionId===e.id),o=i&&void 0!==i.search_type?(0,r.UQ)(i.search_type):r.cO.PINS;u=o,t&&(u=o===r.cO.PINS_BUYABLE?r.cO.PINS:o,l=o===r.cO.PINS_BUYABLE)}else"single"===p.type&&7===e.product_filter_type&&(c=e.filter_options?.[0]?.numeric_value)}}let _=i.find(e=>4===e.product_filter_type),p=_?.filter_options?.find(e=>e.is_selected);return null===u&&"number"==typeof p?.search_type&&(u=(0,r.UQ)(p.search_type)),{brands:o,colors:a,commerce_only:l,domains:n,max:s,min:d,on_sale:c,scope:u}},A=(e,t)=>{let i=[];return(Object.entries(e).forEach(([e,o])=>{let r=t.find(e=>e.id===o.id);if(!r||4===r.product_filter_type||"number"!=typeof r.product_filter_type||!r.filter_options)return;let a=[];if("range"===o.type){let[e,t]=r.filter_options;if(!e?.id||!t?.id)return;a=[{filter_option_id:e.id,numeric_value:o.min,unit:e.unit},{filter_option_id:t.id,numeric_value:o.max,unit:t.unit}]}if("single"===o.type){let e=r.filter_options.find(e=>e.id===o.selectedOptionId);if(!e?.id)return;a=[{filter_option_id:e.id,numeric_value:e.numeric_value,string_value:e.string_value}]}if("multi"===o.type){let e=r.filter_options.filter(e=>e.id&&o.selectedOptionIds.has(e.id));if(0===e.length)return;a=e.filter(e=>void 0!==e.id).map(e=>({filter_option_id:e.id,numeric_value:e.numeric_value,string_value:e.string_value}))}i.push({filter_id:e,filter_options:a,location:o.lastChangedLocation,product_filter_type:r.product_filter_type})}),i&&0!==i.length)?f(i):null},y=e=>{let t,{filter:i,title:o}=e.action||{},{title:r}=i||{},a=o||r;if(!i||!a)return null;let{filterComponentType:l,productFilterType:n,id:s}=i,d=(i.filterOptions||[]).filter(Boolean);if(void 0===l||void 0===d||0===d.length||null==n||null==s)return null;let c=(t=d.map(e=>{if(!e)return null;let{auxData:t,id:i,imageUrl:o,isVerified:r,label:a,numericValue:l,searchType:n,stringValue:s,unit:d,rules:c}=e;return null===o||null===o||null===l||null===r||null===s||null===d?null:{id:i||"",label:a||"",count:0,image_url:o,is_verified:r,numeric_value:l,...c?{rules:[...c]}:{},..."number"==typeof n?{search_type:n}:{},string_value:s,unit:d,..."string"==typeof t?.moduleId?{aux_data:{module_id:t.moduleId}}:{}}}).filter(Boolean)).length>0?t:null;return c?{filter_component_type:l,filter_options:[...c],id:s||"",product_filter_type:n,title:a}:null};function x(e,t,i){let[o,r,a,l]=i,{numeric_value:n=0}=l??o??{},{numeric_value:s=n+50}=a??r??{},{unit:d="USD"}=o??{},c=e.filters[t]?.type==="range"?e.filters[t]:{min:n,max:s,id:t,type:"range",lastChangedLocation:1};return{defaultMax:s,defaultMin:n,unit:d,range:c}}function v(e){return"multi"!==e.type?e:{...e,selectedOptionIds:new Set}}function w(e,t){let i=[];return Object.entries(t).forEach(([t,o])=>{let r=e.find(e=>e?.id===t);if(r){let e=r.aux_data?.module_id;e&&i.push(e);let t=("multi"===o.type?Array.from(o.selectedOptionIds):"single"===o.type?[o.selectedOptionId]:[]).map(e=>{let t=r.filter_options?.find(t=>t.id===e);return t?.aux_data?.module_id||""}).filter(Boolean);i.push(...t)}}),i}function j(e,t){let i=[];return Object.keys(t).forEach(t=>{let o=e.find(e=>e?.id===t);if(o){let e=o.product_filter_type;e&&i.push(e)}}),i}},649811(e,t,i){i.d(t,{A:()=>s});var o=i(693154),r=i(601185),a=i(971289),l=i(870540),n=i(847753);function s(e){let t=(0,a.qJ)(),{checkExperiment:i}=(0,r.A)(),s=(0,l.A)(),d=(0,o.A)(),c=(0,n.H7)(d,s),u=!t||i("web_sce_organic_pinbuilder_dep").anyEnabled;return!c&&(e&&i("sce_lightswitch_organic"),!t||!!u)}},444772(e,t,i){i.d(t,{A:()=>C});var o=i(61163),r=i(859471),a=i(963522),l=i(871292),n=i(296221),s=i(915047),d=i(279037),c=i(79906),u=i(62963),_=i(307424),p=i(145133),h=i(408738),f=i(562615);let m=(0,h.A)(()=>i.e("1868").then(i.bind(i,221535)),{ssr:!1},e=>221535,void 0,void 0),b=(0,h.A)(()=>i.e("16579").then(i.bind(i,997838)),{ssr:!1},e=>997838,void 0,void 0),g=(0,h.A)(()=>Promise.all([i.e("44857"),i.e("94999")]).then(i.bind(i,944352)),{ssr:!1},e=>944352,void 0,void 0),A=(0,h.A)(()=>i.e("66545").then(i.bind(i,915912)),{ssr:!1},e=>915912,void 0,void 0),y=(0,h.A)(()=>Promise.all([i.e("24266"),i.e("59059"),i.e("2920")]).then(i.bind(i,674398)),{ssr:!1},e=>674398,void 0,void 0),x=(0,h.A)(()=>i.e("76890").then(i.bind(i,720097)),{ssr:!1},e=>720097,void 0,void 0),v=(0,h.A)(()=>i.e("64409").then(i.bind(i,264064)),{ssr:!1},e=>264064,void 0,void 0),w=(0,h.A)(()=>i.e("11774").then(i.bind(i,873325)),{ssr:!1},e=>873325,void 0,void 0),j=(0,h.A)(()=>i.e("63874").then(i.bind(i,641305)),{ssr:!1},e=>641305,void 0,void 0),P=[505933,506173,506124,506436,508591],B=({complete:e,dismiss:t,experience:i,placementId:o})=>{let{experience_id:r,display_data:n}=i,d=function(e){switch(e){case 504721:return v;case 504569:return x;case 504032:return w;case 502271:return b;case 505093:return j;default:return m}}(r),h=function(e){switch(e){case 504721:return 660;case 500331:return"md";default:return"sm"}}(r),{setObserverRef:B}=(0,s.NM)();return(0,f.jsxs)(a.az,{ref:B,children:[!P.includes(r)&&(0,f.jsx)(c.Ay,{accessibilityModalLabel:"",onDismiss:t,size:h,children:(0,f.jsx)(d,{...(0,u.A)(_.A)(n),experienceId:r,handleComplete:e,handleDismiss:t,placementId:o})}),506124===r&&(0,f.jsx)(g,{handleComplete:e,handleDismiss:t,isDesktop:!0,isGooglePrimary:!0,...(0,u.A)(_.A)(n)}),(506173===r||506436===r)&&(0,f.jsx)(g,{handleComplete:e,handleDismiss:t,isDesktop:!0,isGooglePrimary:!1,...(0,u.A)(_.A)(n)}),508591===r&&(0,f.jsx)(y,{experienceId:508591,onSubmitSurvey:async()=>{(0,l.A)((0,p.A)({site:"www",path:"/business/marketing-plan"}))},placementId:o,viewType:251}),505933===r&&(0,f.jsx)(A,{handleComplete:()=>{e(),(0,l.A)((0,p.A)({site:"sterling",path:"/reporting/"}))},handleDismiss:t,onAdsReportingSurface:!1})]})};function C({placementId:e}){(0,r.useEffect)(()=>{(0,o.A)("ExperienceModal","/app/common/react/components/experiences/ExperienceModal/ExperienceModal.tsx")},[]);let{enableExperienceSession:t,endOnSurfaceChange:i}=(0,d.A)(e);return(0,f.jsx)(r.Fragment,{children:(0,f.jsx)(n.Je,{customExperienceSession:!0,eligibleIds:[501312,500331,502271,504032,504569,504721,505093,505933,506173,506124,506436,508591],enableExperienceSession:t,placementId:e,sessionEndOnSurfaceChange:i,children:({complete:t,dismiss:i,experience:o})=>(0,f.jsx)(B,{complete:t,dismiss:i,experience:o,placementId:e})})})}},548566(e,t,i){i.d(t,{A:()=>w,D:()=>j});var o=i(61163),r=i(859471),a=i(106386),l=i(979638),n=i(284885),s=i(708261),d=i(963522),c=i(693154),u=i(538329),_=i(542975),p=i(653956),h=i(562615);function f({boardlessPins:e,displayFBCModalContent:t,handleClick:i,imageUrl:a,inFBCExperiment:l,pinRef:n,smallPinRep1:s,smallPinRep2:f,title:m,updateStep:b,onDismiss:g,inResUserFBCExperiment:A=!1,repinData:y}){(0,r.useEffect)(()=>{(0,o.A)("FBCUpsellIntroStep","/app/common/react/components/save/QuickSave/FBCUpsellIntroStep.tsx")},[]);let x=(0,u.A)(),v=(0,c.A)(),w=v.isAuth?v.username:null,j=x._('Save it, sort it, find it', 'fbc.modal.title', 'Describes the core actions (saving, sorting, finding) associated with boards on Pinterest in a catchy way'),P=x._('Boards let you collect and organize your favorite ideas so you can get back to what inspires you.', 'fbc.modal.subtitle', 'Describes what a board is on Pinterest'),B=x._('Create board', 'fbc.modal.button.text', 'Instructs user to create a board'),C=w?(0,_.$)(x._('@{{ username }}\'s Vibe!', 'fbc.modal.board.title', 'States board is user\'s vibe. username: user\'s username'),{username:w.charAt(0).toUpperCase()+w.slice(1)}):null,S={url:y?.image?.url,name:y?.description};return l||A?(0,h.jsx)(d.so,{alignItems:"center",direction:"column",height:594,justifyContent:"start",width:"540",children:t?(0,h.jsxs)(r.Fragment,{children:[(0,h.jsx)(d.az,{marginEnd:2,marginTop:2,padding:2,position:"absolute",right:!0,top:!0,children:(0,h.jsx)(d.K0,{accessibilityLabel:"Dismiss modal",icon:"close",iconColor:"default",onClick:g,size:"lg"})}),(0,h.jsx)(d.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"var(--sema-color-background-wash-scrims-opaque)"}},display:"flex",flex:"grow",justifyContent:"center",width:"100%",children:(0,h.jsxs)(d.az,{alignItems:"start",color:"default",direction:"column",display:"flex",justifyContent:"center",padding:6,rounding:400,width:369,children:[(0,h.jsx)(p.A,{boardKey:null,coverPinKey:null,images:A?[S]:e}),C&&(0,h.jsx)(d.az,{marginTop:1,paddingX:1,width:"100%",children:(0,h.jsx)(d.KJ,{children:C})})]})}),(0,h.jsx)(d.so,{justifyContent:"center",width:"100%",children:(0,h.jsxs)(d.az,{alignItems:"center",direction:"column",display:"flex",paddingY:5,width:458,children:[(0,h.jsx)(d._Y,{align:"center",size:"600",children:j}),(0,h.jsx)(d.az,{marginTop:2,width:"100%",children:(0,h.jsx)(d.KJ,{align:"center",children:P})}),(0,h.jsx)(d.az,{display:"flex",justifyContent:"center",marginTop:4,paddingX:6,width:"100%",children:(0,h.jsx)(d.$n,{color:"primary",fullWidth:!0,onClick:b,size:"lg",text:B})})]})})]}):(0,h.jsx)(d.so,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:(0,h.jsx)(d.y$,{show:!0})})}):(0,h.jsxs)(d.Rp,{onTap:i,rounding:800,children:[(0,h.jsx)(d.az,{alignItems:"center","data-test-id":"content-wrapper",display:"flex",justifyContent:"center",marginTop:8,minHeight:300,children:(0,h.jsxs)(d.az,{display:"flex",justifyContent:"between",overflow:"hidden",rounding:400,children:[(0,h.jsx)(d.az,{ref:n,height:300,width:200,children:a&&(0,h.jsx)(d._V,{alt:m||"",fit:"cover",naturalHeight:1,naturalWidth:1,src:a})}),(0,h.jsxs)(d.so,{alignItems:"stretch",direction:"column",justifyContent:"between",children:[(0,h.jsx)(d.az,{ref:s,color:"secondary",height:150}),(0,h.jsx)(d.az,{ref:f,color:"secondary",height:150})]})]})}),(0,h.jsx)(d.az,{padding:8,children:(0,h.jsx)(d._Y,{align:"center",size:"600",children:x._('Keep your ideas organized by creating a board', 'quickSave.eduToast.heading', 'Explain users why they should create a board')})})]})}var m=i(586733),b=i(296221),g=i(79906),A=i(430705),y=i(168079),x=i(777064),v=i(699613);function w({boardId:e,boardUrl:t,onHide:i,imageUrl:d,title:_,toastDuration:p,firstBoardCreationExperimentEnabled:b=!1,resUserFirstBoardCreationExperimentEnabled:w=!1,showRepinAnimation:j,onComplete:P,repinData:B}){(0,r.useEffect)(()=>{(0,o.A)("QuickSaveBoardCreateEdu","/app/common/react/components/save/QuickSave/QuickSaveBoardCreateEdu.tsx")},[]);let{logContextEvent:C}=(0,m.o)(),S=(0,u.A)(),z=(0,l.Zp)(),I=(0,r.useRef)(null),E=(0,r.useRef)(null),O=(0,r.useRef)(null),[T,F]=(0,r.useState)("INTRO_STEP"),k=(0,c.A)(),D=k.isAuth?k.id:"",M=(0,a.d4)(({feeds:e})=>e[`boardless-pins:${k.isAuth?k.id:""}`])||[],R=(0,v.zy)(),{boardlessPinsEnabled:L}=(0,x.KP)(D),N=(0,A.A)((b||w)&&L&&D?{name:"BoardlessPinsResource",options:{redux_normalize_feed:!0,userId:D}}:null),H=!!M&&M.reduce((e,t)=>{let i=R[t.id];return e.push({name:i?.description,url:i?.images?.["236x"]?.url}),e},[])||[],U=(M||[]).length>0&&N?.data||w&&B;(0,y.A)(()=>{(b||w)&&C({event_type:13,view_type:740,view_parameter:4165})}),(0,y.A)(()=>{C({event_type:9311,element:11934,object_id_str:e}),setTimeout(()=>{let e,t,i;return e=I.current,t=E.current,i=O.current,void(e&&t&&i&&((0,n.A)({targets:e,height:[202],duration:600,delay:1e3,easing:"linear"}),(0,n.A)({targets:[t,i],width:[0,100],height:[100],marginLeft:[2],delay:1e3,duration:600,easing:"linear"})))},100);let t=setTimeout(()=>{b||w||i()},p);return()=>clearTimeout(t)});let $=()=>n.A.remove([I.current,E.current,O.current]),J=()=>{C({event_type:9313,element:11934,object_id_str:e}),(b||w)&&C({event_type:17476,view_type:740,view_parameter:4165}),$(),i()};return(0,h.jsxs)(r.Fragment,{children:["INTRO_STEP"===T&&(0,h.jsx)(g.Ay,{accessibilityModalLabel:S._('Keep your ideas organized by creating a board', 'quickSave.eduToast.modalAccessibilityLabel', 'Explain users why they should create a board'),onDismiss:J,children:(0,h.jsx)(f,{boardlessPins:H,displayFBCModalContent:!!U,handleClick:()=>{C({event_type:9312,element:11934,object_id_str:e}),$(),i(),z(t)},imageUrl:d,inFBCExperiment:b,inResUserFBCExperiment:w,onDismiss:J,pinRef:I,repinData:B,smallPinRep1:E,smallPinRep2:O,title:_,updateStep:()=>{F("BOARD_CREATE_STEP"),C({event_type:101,view_type:740,view_parameter:4165,element:96})}})}),(b||w)&&"BOARD_CREATE_STEP"===T&&M.length>0&&(0,h.jsx)(s.A,{boardlessPinsNormalized:M,fetchMore:()=>{},hasBoards:!1,isFirstBoardCreation:b,isResUserFirstBoardCreation:w,lastSavedPin:B,onComplete:P,onDismiss:()=>{C({event_type:17476,view_type:740,view_parameter:4166,element:12284}),i()},showRepinAnimation:j,userId:k.isAuth?k.id:""})]})}function j({experience:e}){return(0,r.useEffect)(()=>{(0,o.A)("QuickSaveBoardCreateEdu","/app/common/react/components/save/QuickSave/QuickSaveBoardCreateEdu.tsx")},[]),(0,h.jsx)(b.Je,{eligibleIds:[508446],experience:e,children:({complete:e,dismiss:t,experience:i})=>(0,h.jsx)(w,{boardId:"",boardUrl:"",imageUrl:"",onComplete:e,onHide:t,repinData:{id:i.display_data?.repin_id??"",image:{url:i.display_data?.repin_image?.url??"",height:i.display_data?.repin_image?.height??0,width:i.display_data?.repin_image?.width??0},description:i.display_data?.repin_description??""},resUserFirstBoardCreationExperimentEnabled:!0,title:"",toastDuration:5e3})})}},634224(e,t,i){i.d(t,{A:()=>r});var o=i(257300);let r=async e=>(await (0,o.A)({url:"/v3/board/{board}/report_reasons/",urlParams:{board:e}})).resource_response.data},832057(e,t,i){i.d(t,{A:()=>r});var o=i(257300);let r=async(e,t)=>await (0,o.A)({url:"/v3/board/{board}/flag/",urlParams:{board:e},method:"POST",data:t})},348681(e,t,i){i.d(t,{A:()=>d,r:()=>s});var o=i(859471),r=i(743372),a=i(676692),l=i(596664),n=i(844255);function s(e,t){let{setViewContextData:i}=(0,a.x)(),{requestIdentifier:s}=(0,n._8)(),d=(0,r.A)(),{viewData:c}=(0,a.WQ)();(0,o.useEffect)(()=>{e&&(i({viewType:e.view_type??1,viewParameter:e.view_parameter,viewData:e.view_data?(0,l.A)(c,e.view_data):c,component:e.component,element:e.element,objectIdStr:e.object_id_str,auxData:e.aux_data,clientTrackingParams:e.clientTrackingParams}),d({...e,event_type:13,request_identifier:s}))},[t])}function d(e){let{children:t,log:i}=e;return s(i),t||null}},171768(e,t,i){i.d(t,{A:()=>M});var o=i(61163),r=i(859471),a=i(548566),l=i(296221),n=i(731237),s=i(822727),d=i(963522),c=i(743372),u=i(676692),_=i(995273),p=i(538329),h=i(809756),f=i(562615);function m({dismissExperience:e,onClickCreateBoard:t}){(0,r.useEffect)(()=>{(0,o.A)("BoardUpsellBanner","/app/www/nux/encouragements/BoardUpsellBanner.tsx")},[]);let i=(0,p.A)(),{navFooterHeight:a,setForceShowNavFooter:l}=(0,h.o)(),n=(0,c.A)(),{viewParameter:s}=(0,u.WQ)();(0,r.useEffect)(()=>(l(!0),()=>{l(!1)}),[l]);let m=i._('Pin saved! Add it to a board', 'boardUpsellBanner.header', 'Header for the board upsell banner'),b=i._('Boards keep your ideas organized and easy to find later.', 'boardUpsellBanner.message', 'Message for the board upsell banner'),g=i._('Create a board', 'boardUpsellBanner.buttonLabel', 'Label for the create a board button');return(0,f.jsx)(d.Wd,{zIndex:_.nH,children:(0,f.jsx)(d.az,{bottom:!0,dangerouslySetInlineStyle:{__style:{marginBottom:a+8}},paddingX:3,paddingY:2,position:"fixed",right:!0,width:"100%",children:(0,f.jsx)(d.Sl,{dismissButton:{accessibilityLabel:i._('Dismiss banner', 'boardUpsellBanner.dismiss', 'Accessibility label for the dismiss button'),onDismiss:()=>{n({event_type:123,view_type:3,view_parameter:s,component:15569}),e()}},imageData:{component:(0,f.jsx)(d.In,{accessibilityLabel:i._('Pin Icon', 'boardUpsellBanner.pinIcon', 'Accessibility label for the pin icon'),color:"primary",icon:"compact-pin-angled",size:20})},message:b,primaryAction:{accessibilityLabel:i._('Create board button', 'boardUpsellBanner.createBoardButton', 'Accessibility label for the create board button'),label:g,onClick:()=>{n({event_type:102,element:249,view_type:3,view_parameter:s,component:15569}),t()}},title:m})})})}var b=i(106386),g=i(979638),A=i(457315),y=i(79906),x=i(567176),v=i(601185),w=i(706466),j=i(653956),P=i(48180),B=i(647646),C=i(597615),S=i(251422),z=i(180152),I=i(189851),E=i(945685),O=i(573211),T=i(720407);function F({completeExperience:e,dismissExperience:t,repinData:i}){(0,r.useEffect)(()=>{(0,o.A)("FirstBoardCreateHalfSheet","/app/www/save/BoardUpsell/FirstBoardCreateHalfSheet.tsx")},[]);let a=(0,p.A)(),l=(0,g.zy)(),n=(0,b.wA)(),s=(0,O.Y)(),{checkExperiment:_}=(0,v.A)(),h=(0,c.A)(),m=(0,T.A)(),F=(0,I.oW)(),{showToast:k}=(0,w.CG)(),{viewParameter:D}=(0,u.WQ)(),[M,R]=(0,r.useState)(!1),[L,N]=(0,r.useState)(""),[H,U]=(0,r.useState)(!1),$=i.id,J={url:i?.image?.url,name:i?.description},q=a._('Keep board secret', 'boardCreationHalfSheet.boardSecret.label', 'Label for board secret toggle'),K=a._('Create Board', 'boardCreationHalfSheet.title', 'Title for board creation modal'),G=a._('Create', 'boardCreationHalfSheet.createButton.label', 'Label for board creation button'),W=a._('Enter board name', 'boardCreationHalfSheet.boardName.placeholder', 'Placeholder for board name input'),Y=a._('Board Name', 'boardCreationHalfSheet.boardName.label', 'Label for board name input'),V=a._('Close board creation modal button', 'boardCreationHalfSheet.boardName.accessibilityLabel', 'Accessibility label for board name input'),Q=a._('Create first board modal', 'boardCreationHalfSheet.accessibilityModalLabel', 'Accessibility label for board creation modal'),X=a._('Board name is too long', 'boardCreationHalfSheet.boardNameTooLongErrorMessage', 'Error message for board name input'),Z=async()=>{h({event_type:102,element:249,view_type:3,view_parameter:D,component:15544});let t=(0,P.A)(l.state?.trackingParams||"");try{let i=await m({boardCreateOptions:{name:L,initial_pin_client_tracking_params:[t],privacy:M?"secret":"public"},deprecatedSchemaForNormalization:z.no}),{url:o="",id:r}=i||{};$&&n((0,S.c)({checkExperiment:_,i18n:a,logContextEvent:h,pinId:$,boardId:r,trackingParams:{clientTrackingParams:t,pinnedToBoardId:r},historyPush:()=>void 0,savePinId:s?.save??(()=>{})})),e();let{duration:l,text:d,thumbnail:c}=(0,B.A)({boardId:r,getReduxBoard:F,isFBC:!0,pinId:$,viewType:3}),{href:u}=(0,E.A)(o,i.name??"",a);return k(({hideToast:e})=>(0,f.jsx)(C.A,{duration:l,href:u,onHide:e,text:d,thumbnail:c})),{boardId:r,boardUrl:o}}catch(e){return k(({hideToast:t})=>(0,f.jsx)(x.A,{duration:5e3,onHide:t,text:(0,A.A)(e,"message_detail")||(0,A.A)(e,"message")||a._('Sorry! Something went wrong on our end.', 'error creating board', 'error creating board')})),null}},ee=()=>{h({event_type:123,view_type:3,view_parameter:D,component:15544}),t()};return(0,f.jsx)(y.Ay,{accessibilityModalLabel:Q,onDismiss:ee,children:(0,f.jsxs)(d.az,{padding:2,children:[(0,f.jsxs)(d.az,{alignItems:"center",display:"flex",justifyContent:"between",paddingY:1,width:"100%",children:[(0,f.jsx)(d.K0,{accessibilityLabel:V,icon:"close",onClick:ee,size:"lg"}),(0,f.jsx)(d._Y,{color:"default",size:"300",children:K}),(0,f.jsx)(d.$n,{color:"primary",disabled:H||!L,onClick:Z,size:"md",text:G})]}),(0,f.jsxs)(d.so,{direction:"column",children:[(0,f.jsx)(d.az,{display:"flex",height:"100%",justifyContent:"center",padding:2,width:"100%",children:(0,f.jsx)(d.az,{width:269,children:(0,f.jsx)(j.A,{boardKey:null,coverPinKey:null,fullSize:!0,images:[J]})})}),(0,f.jsxs)(d.az,{padding:2,children:[(0,f.jsx)(d.A_,{errorMessage:H?X:void 0,errorMessageDisplay:H?"visible":"hidden",id:"board-name-input",label:Y,mobileInputMode:"text",onChange:({value:e})=>{N(e),e.length>=100?U(!0):U(!1)},placeholder:W,size:"lg",type:"text",value:L}),(0,f.jsxs)(d.az,{display:"flex",justifyContent:"between",padding:4,children:[(0,f.jsx)(d.KJ,{size:"100",children:q}),(0,f.jsx)(d.dO,{id:"secretBoardToggle",onChange:()=>R(!M),switched:M})]})]})]})]})})}function k({complete:e,dismiss:t,experience:i}){let[o,a]=(0,r.useState)(1),l=(0,r.useRef)(!1);(0,r.useEffect)(()=>()=>{l.current||t()},[t]);let n=()=>{l.current=!0,t()};return 1===o?(0,f.jsx)(m,{dismissExperience:n,onClickCreateBoard:()=>a(2)}):(0,f.jsx)(F,{completeExperience:()=>{l.current=!0,e()},dismissExperience:n,repinData:{id:i.display_data?.pin_id??"",image:{url:i.display_data?.pin_image?.url??""},description:i.display_data?.pin_description??""}})}function D({experience:e}){return(0,r.useEffect)(()=>{(0,o.A)("FirstBoardUpsellExperience","/app/www/save/BoardUpsell/FirstBoardUpsellExperience.tsx")},[]),(0,f.jsx)(s.Ay,{eligibleIds:[508536],experience:e,children:({complete:e,dismiss:t,experience:i})=>(0,f.jsx)(k,{complete:e,dismiss:t,experience:i})})}let M=({placementId:e})=>{(0,r.useEffect)(()=>{(0,o.A)("ExperiencesAfterAction","/app/packages/experiences/Framework/ExperiencesAfterAction.tsx")},[]);let{experienceForPlacement:t}=(0,n.Du)(e),{unmountPlacement:i,registerAfterActionPlacement:s}=(0,n.WJ)();return(0,r.useEffect)(()=>(s(e),()=>{i(e)}),[e,i,s]),(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(l.aR,{experience:t}),(0,f.jsx)(l.r8,{experience:t}),(0,f.jsx)(l.Vj,{experience:t}),(0,f.jsx)(a.D,{experience:t}),(0,f.jsx)(D,{experience:t})]})}},813985(e,t,i){i.d(t,{n1:()=>s,hr:()=>n});var o=i(598948),r=i(636032),a=i(890922),l=i(998556);function n({searchParams:e,sourceUrl:t,isDesktop:i,isAuthenticated:o,appliedUnifiedFilters:r}){let{autoCorrectionDisabled:a,bubbleId:l,category:n,currentlyAppliedFiltersParamTerm:s,domains:c,guidedSearchQuery:u,inGlobalSearch:_,journeyDepth:p,personalizationPinSig:h,priceMax:f,priceMin:m,query:b,queryImagePins:g,requestParams:A,rs:y,scope:x,selectedOneBarModules:v,sourceId:w,sourceModuleId:j,topPinIds:P,user:B}=e;return function(e){let{selectedOneBarModules:t,currentlyAppliedFiltersParamTerm:i,personalizationPinSig:o,inGlobalSearch:r,appliedUnifiedFilters:a,initialCategory:l,initialDomains:n,initialMaxPrice:s,initialMinPrice:c,isDuplo:u,..._}=e,p=t?.split(","),h={..._,filters:i,selectedOneBarModules:p,selectedPinImgSig:o};if(r)return d(h);let f={...h,appliedUnifiedFilters:a,appliedProductFilters:function({category:e,domains:t,maxPrice:i,minPrice:o}){return[e,t,i,o].map(e=>e??"").join("-")}({category:l,domains:n,maxPrice:s,minPrice:c})};return u&&(f.domains=n,f.priceMax=s?parseInt(s,10):void 0,f.priceMin=c?parseInt(c,10):void 0),d(f)}({appliedUnifiedFilters:r,autoCorrectionDisabled:a,bubbleId:l,currentlyAppliedFiltersParamTerm:s,guidedSearchQuery:u,inGlobalSearch:_,initialCategory:n,initialDomains:c,initialMaxPrice:f,initialMinPrice:m,isDuplo:!o||!i,journeyDepth:p,personalizationPinSig:h,query:b,queryImagePins:g,requestParams:A,rs:y,scope:x,selectedOneBarModules:v,sourceId:w,sourceModuleId:j,sourceUrl:t,topPinIds:P,user:B})}function s({appliedProductFilters:e,applied_unified_filters:t,auto_correction_disabled:i,filters:o,journey_depth:r,query:a,rs:l,scope:n,selected_one_bar_modules:s,query_image_pins:d,query_pin_sigs:c,source_id:u,source_module_id:_,top_pin_ids:p,user:h}){let f=[e,o,r,a,l,n,s,d,c,u,_,t,p,h].map(e=>e??"").join(":");return i?"auto-correction-disabled:"+f:f}function d(e){return{name:"BaseSearchResource",options:(e=>{let{query:t="",scope:i="pins",appliedUnifiedFilters:n=null,appliedProductFilters:s=null,filters:d=null,domains:c=null,priceMax:u=null,priceMin:_=null,rs:p=a.I.DIRECT_NAVIGATION,journeyDepth:h=null,sourceId:f=null,sourceModuleId:m=null,sourceUrl:b=null,selectedOneBarModules:g=null,selectedPinImgSig:A=null,user:y=null,autoCorrectionDisabled:x=!1,seoDrawerEnabled:v=!1,bubbleId:w=null,pageSize:j=null,queryImagePins:P=null,requestParams:B=null,topPinIds:C=null}=e,S="u">typeof window?(0,l.y1)().getItem("pwt_performance_testing"):null,z=b&&b.includes("pwt_performance_testing"),I=!!(!0===S||"true"===S||z);return{query:t,scope:i,appliedProductFilters:s,domains:c,user:y,seoDrawerEnabled:v,applied_unified_filters:n,auto_correction_disabled:x,journey_depth:h,source_id:f,source_module_id:m,source_url:function(e){if(!e)return"";let t=new Set,i=e.split("?")[1];i&&i.split("&").forEach(e=>{e.includes("=")||t.add(e)});let{directory:a,queryKey:l}=(0,o.A)((0,r.A)(e,["request_params"])),n=Object.keys(l).sort().map(e=>t.has(e)?e:`${e}=${l[e]}`).join("&");return n?`${a}?${n}`:a}(b),static_feed:I,selected_one_bar_modules:g,query_pin_sigs:A,page_size:j,price_max:u,price_min:_,query_image_pins:P,request_params:B,top_pin_ids:C,article:w,corpus:A?"personalize":null,customized_rerank_type:A?"manas_graph_sage_only_wand_rewrite":null,filters:d,rs:p,redux_normalize_feed:!0}})({...e,autoCorrectionDisabled:!!e.autoCorrectionDisabled})}}},5302(e,t,i){i.d(t,{A:()=>o});function o(e,t){let i=t?.separateNumbers?/([A-Z]|\d)/g:/([A-Z])/g;return e.replace(i,(e,t)=>"_"+t.toLowerCase())}},83203(e,t,i){i.d(t,{A:()=>s});var o=i(963522),r=i(567176),a=i(538329),l=i(706466),n=i(562615);function s(){let{showToast:e}=(0,l.CG)(),t=(0,a.A)();return()=>{e(({hideToast:e})=>(0,n.jsx)(r.A,{duration:5e3,onHide:e,text:t._('Blocked. To manage your block list, see social permissions in settings.', 'blockedAccounts.blockConfirmMessage', 'This message appears when a user block an account as confirmation message'),thumbnail:{icon:(0,n.jsx)(o.In,{accessibilityLabel:t._('Success icon', 'blockedAccounts.blockConfirmMessage.icon', 'Icon displayed in the toast message as visual representation of a success message'),color:"default",icon:"circle-check-fill",size:12})}}))}}},998317(e,t,i){i.d(t,{Ay:()=>c,fG:()=>u,z1:()=>d});var o,r=i(224989),a=i(224723),l=i(106301),n=i(762512);let s=(void 0!==o||(o=i(201563)).hash&&"547e5abdb645851996d6a1b1a4027c56"!==o.hash&&console.error("The definition of 'hasSensitivityNotices_sensitivity' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o);function d(e){let{notices:t,advisory:i,severity:o}=(0,r.useFragment)(s,e)||{};return{hasNotices:!!(t?.[0]&&null!==t[0].title),advisory:i,severity:o}}function c(e){if(null==e)return{hasNotices:!1};let{advisory:t,severity:i}=e,o=!!e.notices&&e.notices.length>0;return e.notices&&e.notices.length>0&&e.notices[0]?.title===null&&(o=!1),{hasNotices:o,advisory:t,severity:i}}function u(e){let{scope:t}=(0,l.u)(),{data:i,isLoaded:o}=(0,n.A)(),r=d(e);if(t===a.cO.USERS)return r;if(!o||!i)return{hasNotices:!1};let{sensitivity:s}=i;return c(s)}},621877(e,t,i){i.d(t,{A:()=>a,o:()=>o});let{Provider:o,get:r}=(0,i(987628).A)("Conversations"),a=r},523764(e,t,i){i.d(t,{M5:()=>_,QZ:()=>n,xL:()=>u});var o=i(859471),r=i(987628),a=i(584342),l=i(562615);let n=a.d1+1,s={educationId:null,paddingRight:0,zIndex:n};function d(e,t){switch(t.type){case"FOOTER_SET_EDUCATION_ID":let{educationId:i}=t.payload;return{...e,educationId:i};case"FOOTER_SET_PADDING_RIGHT":let{paddingRight:o}=t.payload;return{...e,paddingRight:o};case"FOOTER_SET_Z_INDEX":let{zIndex:r}=t.payload;return{...e,zIndex:r};default:return e}}let{Provider:c,get:u}=(0,r.A)("footerContext");function _({children:e}){let[t,i]=(0,o.useReducer)(d,s),r=(0,o.useCallback)(e=>i({type:"FOOTER_SET_PADDING_RIGHT",payload:{paddingRight:e}}),[]),a=(0,o.useCallback)(e=>i({type:"FOOTER_SET_EDUCATION_ID",payload:{educationId:e}}),[]),n=(0,o.useCallback)(e=>i({type:"FOOTER_SET_Z_INDEX",payload:{zIndex:e}}),[]),u=(0,o.useMemo)(()=>({...t,setEducationId:a,setPaddingRight:r,setZIndex:n}),[t,a,r,n]);return(0,l.jsx)(c,{value:u,children:e})}},720575(e,t,i){i.d(t,{A:()=>c});var o=i(61163),r=i(859471),a=i(676692),l=i(33658),n=i(970042),s=i(562615);class d extends r.Component{componentDidMount(){let{setCurrentPageData:e,viewData:t,viewParameter:i,viewType:o}=this.props;e({viewData:t,viewParameter:i,viewType:o})}componentDidUpdate(e){let{setCurrentPageData:t,viewData:i,viewParameter:o,viewType:r}=this.props;o===e.viewParameter&&r===e.viewType&&(0,l.Ay)(i,e.viewData)||t({viewData:i,viewParameter:o,viewType:r})}componentWillUnmount(){this.props.clearCurrentPageData()}render(){let{auxData:e,children:t,component:i,objectIdStr:o,viewData:r,viewParameter:a,viewType:l,clientTrackingParams:d}=this.props;return(0,s.jsx)(n.A,{auxData:e,clientTrackingParams:d,component:i,objectIdStr:o,viewData:r,viewParameter:a,viewType:l,children:t})}}function c(e){(0,r.useEffect)(()=>{(0,o.A)("PageView","/app/www/analytics/PageView.tsx")},[]);let{setViewContextData:t,clearViewContextData:i}=(0,a.x)();return(0,s.jsx)(d,{...e,clearCurrentPageData:i,setCurrentPageData:t})}},106301(e,t,i){i.d(t,{n:()=>_,u:()=>u});var o=i(859471),r=i(979638),a=i(987628),l=i(224723),n=i(971289),s=i(531525),d=i(562615);let{Provider:c,get:u}=(0,a.A)("SearchParams"),_=({children:e,value:t})=>{let i=function(){let e=(0,n.qJ)(),{search:t,pathname:i}=(0,r.zy)(),{scope:o}=(0,r.g)(),a=!o&&i.includes("/_tools/shop");return(0,s.A)({isDesktop:e,scope:a?l.cO.SHOP_TOOL:o??l.cO.PINS,search:t})}(),a=(0,o.useMemo)(()=>({...i,...t}),[i,t]);return(0,d.jsx)(c,{value:a,children:e})}},160068(e,t,i){i.d(t,{A:()=>o});let o=(0,i(859471).createContext)({inboxButton:null,setInboxButton:()=>{},profileInboxButton:null,groupBoardMessageButton:null,setProfileInboxButton:()=>{},isUnblockToast:!1,setIsUnblockToast:()=>{},setGroupBoardMessageButton:()=>{}})},370963(e,t,i){i.d(t,{A:()=>a});var o=i(859471),r=i(160068);function a(){let e=(0,o.use)(r.A);if(void 0===e)throw Error("useInboxButtonContext must be used within a InboxButtonContext Provider.");return e}},531525(e,t,i){i.d(t,{A:()=>a});var o=i(224723),r=i(803489);function a({isDesktop:e,scope:t,search:i}){let{auto_correction_disabled:a="",b_id:l,brands:n,category:s,colors:d,commerce_only:c="",cover_pin_sig:u,deb_d:_,domains:p,filters:h,guided_search_query:f,inline_suggestion:m,interest_id:b,journey_depth:g,on_sale:A,price_max:y,price_min:x,q:v,query_pin_sigs:w,query_image_pins:j,quiz:P,request_params:B,rs:C,selected_one_bar_modules:S,source_id:z,source_module_id:I,tab:E,top_pin_ids:O,user:T}=(0,r.A)(i),F="true"===c.toLowerCase()&&"shop_tool"!==t?o.cO.PINS_BUYABLE:t;return{autoCorrectionDisabled:"true"===a.toLowerCase(),brands:n,bubbleId:l,category:s,colors:d,commerceOnly:"true"===c.toLowerCase(),coverPinSig:u,currentlyAppliedFiltersParamTerm:h,debD:_,domains:p,guidedSearchQuery:f,inlineSuggestion:m,interestId:b,journeyDepth:g?parseInt(g,10):void 0,onSale:A,personalizationPinSig:w,placementId:(0,o.my)(F,e),priceMax:y,priceMin:x,query:v,queryImagePins:j,quiz:P,requestParams:B,rs:C,scope:F,selectedOneBarModules:S,sourceId:z,sourceModuleId:I,tab:E||"",topPinIds:O,user:T,viewParameter:(0,o._n)(F),viewType:F===o.cO.SHOP_TOOL?1:2}}},762512(e,t,i){i.d(t,{A:()=>_,Y:()=>p});var o=i(979638),r=i(607126),a=i(601185),l=i(844255),n=i(430705),s=i(813985),d=i(224723),c=i(971289),u=i(106301);function _(e){let{resource:t}=p(e);return t}function p(e){let{skipResourceCall:t}=e||{},{checkExperiment:i}=(0,a.A)(),{isAuthenticated:_}=(0,l._8)(),{pathname:p,search:h}=(0,o.zy)(),f=(0,c.qJ)(),m=!_||!f,b=(0,u.u)(),g=(0,r.A)(),A=(0,s.hr)({searchParams:b,sourceUrl:p+h,isDesktop:f,isAuthenticated:_,appliedUnifiedFilters:g}),y=m;m&&(y=!!_&&!i("unify_search_resource_auth_mweb").anyEnabled);let x=t||b.scope===d.cO.USERS&&!m||y;return{resource:(0,n.A)(x?null:A),options:A.options}}},643294(e,t,i){i.d(t,{A:()=>s,N:()=>d});var o=i(257300),r=i(671931),a=i(204398),l=i(513010),n=i(504252);function s(e,t,i){return s=>(0,o.A)({url:"/v3/boards/{source_board}/merge/{target_board}/",urlParams:{source_board:e,target_board:t},method:"POST",data:i?{orbac_subject_id:i}:{}}).then(()=>Promise.all([s((0,a.Qv)({boardId:e})),s((0,r.A)(t,"pin_count")),s((0,l.eO)(n.A.BOARD_SECTIONS,t))]))}let d=async(e,t,i,s)=>{await (0,o.A)({url:"/v3/boards/{source_board}/merge/{target_board}/",urlParams:{source_board:t,target_board:i},method:"POST",data:s?{orbac_subject_id:s}:{}}),e((0,a.Qv)({boardId:t})),(0,r.A)(i,"pin_count"),e((0,l.eO)(n.A.BOARD_SECTIONS,i))}},326580(e,t,i){i.d(t,{A:()=>l,B:()=>n});var o=i(430705),r=i(705739);let a=({boardId:e,ownerId:t,ownerUsername:i,ownerName:a,ownerImgSrc:l})=>{let n=(0,r.A)(),{data:s,isLoaded:d}=(0,o.A)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...n?{orbac_subject_id:n}:{}}}),c=[{id:t,name:a,src:l,href:`/${i}/`,isDim:!1}];return d&&s&&s.length>0&&s.forEach(e=>{c.push({id:e.invited_user?e.invited_user.id:"",name:e&&e.invited_user?e.invited_user.full_name:"",color:e&&e.invited_user?e.invited_user.avatar_color_index:void 0,src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})}),c},l=a;function n({children:e,...t}){return e(a(t))}},354818(e,t,i){i.d(t,{A:()=>tl});var o=i(61163),r=i(859471),a=i(106386),l=i(979638),n=i(963522),s=i(998365),d=i(649811),c=i(444772),u=i(360898),_=i(227835),p=i(72047),h=i(586733),f=i(948641),m=i(296221),b=i(171768),g=i(406661),A=i(693154),y=i(662449),x=i(319571),v=i(706466),w=i(168079),j=i(870540),P=i(847753),B=i(720575),C=i(826258),S=i(131094),z=i(562615);function I({layoutType:e,thumbnails:t}){switch((0,r.useEffect)(()=>{(0,o.A)("BoardActionUpsellImages","/app/www/BoardActionUpsells/BoardActionUpsellImages.tsx")},[]),e){case 4:let i=t&&t[0]&&t[0]["236x"];return(0,z.jsx)(n.n1,{height:80,rounding:400,width:80,children:i?(0,z.jsx)(n._V,{alt:"",color:"gray",fit:"cover",naturalHeight:i.height,naturalWidth:i.width,src:i.url}):(0,z.jsxs)(n.so,{alignItems:"stretch",justifyContent:"start",children:[(0,z.jsx)(n.az,{color:"secondary",height:80,width:39.4}),(0,z.jsxs)(n.az,{dangerouslySetInlineStyle:{__style:{paddingLeft:1.2}},children:[(0,z.jsx)(n.az,{color:"secondary",height:39.4,width:39.4}),(0,z.jsx)(n.az,{color:"secondary",dangerouslySetInlineStyle:{__style:{marginTop:"1.2px"}},height:40.6,width:39.4})]})]})});case 2:return(0,z.jsx)(n.n1,{height:80,rounding:400,width:80,children:(0,z.jsx)(n.so,{alignItems:"stretch",justifyContent:"start",children:[0,1].map(e=>{let i=t&&t?.length>0?t[e]:null;return(0,z.jsx)(n.az,{dangerouslySetInlineStyle:{__style:{paddingRight:1.2}},children:(0,z.jsx)(n.az,{height:80,width:39.4,children:i?.["236x"]?.url&&(0,z.jsx)(n._V,{alt:"",color:"gray",fit:"cover",naturalHeight:80,naturalWidth:39.4,src:i["236x"].url})})},e)})})});default:return null}}let E=[502043,502085],O=`
.BoardActionUpsellCard {
  animation-duration: 0.5s;
  animation-fill-mode: forwards;
  animation-name: slideUp;
  animation-timing-function: ease-out;
  background-color: #fff;
  border-radius: 16px;
  box-shadow: 0 2px 14px 0 rgba(0, 0, 0, 0.25);
  display: flex;
  justify-content: between;
  left: 50%;
  margin-left: -210px; // half of width
  padding: 24px;
  position: fixed;
  transition: bottom 1s;
  width: 420px;
}

@keyframes slideUp {
  from {
    bottom: -200px;
  }

  to {
    bottom: 14px;
  }
}
`;function T({boardId:e,displayData:t,complete:i,dismiss:o,handleShowArchiveConfirmation:a}){let{logContextEvent:l}=(0,h.o)(),[s,d]=(0,r.useState)(void 0);(0,r.useEffect)(()=>()=>clearTimeout(s),[s]);let c={2:a};return(0,r.useEffect)(()=>{s||d(setTimeout(()=>{o()},2e4)),l({event_type:13,view_type:5,view_parameter:3069,element:11758,object_id_str:JSON.stringify(t.experience.experience_id),aux_data:{board_id:e}})},[]),(0,z.jsxs)(n.Wd,{children:[(0,z.jsx)(S.A,{unsafeCSS:O}),(0,z.jsxs)("div",{className:"BoardActionUpsellCard",children:[(0,z.jsx)(n.az,{flex:"none",children:(0,z.jsx)(I,{layoutType:t.layout_type,thumbnails:t.thumbnail_image_urls})}),(0,z.jsxs)(n.az,{marginStart:4,children:[(0,z.jsx)(n.KJ,{inline:!0,children:(0,z.jsx)(n._Y,{size:"400",children:t.text})}),(0,z.jsxs)(n.az,{display:"flex",justifyContent:"start",marginTop:4,width:"100%",children:[(0,z.jsx)(n.$n,{color:"secondary",onClick:()=>{l({event_type:123,view_type:5,view_parameter:3069,element:11758,object_id_str:JSON.stringify(t.experience.experience_id),aux_data:{board_id:e}}),o()},text:t.dismiss_button.text}),(0,z.jsx)(n.az,{paddingX:2,children:(0,z.jsx)(n.$n,{color:"primary",onClick:()=>{c[t.complete_button.action_type](),l({event_type:101,view_type:5,view_parameter:3069,element:11758,object_id_str:JSON.stringify(t.experience.experience_id),aux_data:{board_id:e}}),i()},text:t.complete_button.text})})]})]})]})]})}function F({boardId:e,handleShowArchiveConfirmation:t}){return(0,r.useEffect)(()=>{(0,o.A)("BoardActionUpsellCard","/app/www/BoardActionUpsells/BoardActionUpsellCard.tsx")},[]),(0,z.jsx)(m.Je,{eligibleIds:E,placementId:18,children:({experience:i,complete:o,dismiss:r})=>(0,z.jsx)(T,{boardId:e,complete:o,dismiss:r,displayData:i.display_data,handleShowArchiveConfirmation:t})})}var k=i(427326),D=i(204398),M=i(839625),R=i(938380),L=i(956083),N=i(914296),H=i(79906),U=i(538329),$=i(542975);function J(){(0,r.useEffect)(()=>{(0,o.A)("GroupBoardFavoriteEducationModal","/app/www/FavoriteButton/GroupBoardFavoriteEducationModal.tsx")},[]);let e=(0,U.A)(),t=(0,z.jsx)(n.az,{display:"flex",justifyContent:"center",paddingX:8,children:(0,z.jsx)(n.KJ,{children:(0,$.vQ)(e._('Add a {{ star }} to show collaborators your favorite Pins', 'groupBoardFavoriteEducationModal.text', 'Text for modal informing users of changes from group board reactions to board favorites'),{star:(0,z.jsx)(n.az,{display:"inlineBlock",children:(0,z.jsx)(n.In,{accessibilityLabel:e._('Favorite icon', 'groupBoardFavoriteEducationModal.bodyFavoriteIcon', 'Accessibility label for favorite icon'),color:"default",icon:"star-fill",size:12})})})})});return(0,z.jsx)(m.Je,{eligibleIds:[503077],placementId:18,children:({complete:i,dismiss:o})=>(0,z.jsx)(H.Ay,{accessibilityModalLabel:e._('Group board reaction', 'groupBoardFavoriteEducationModal.modalAccessibilityLabel', 'Accessiblility label for modal used to educate group board collaborators about favorite button'),footer:(0,z.jsx)(n.so,{justifyContent:"end",children:(0,z.jsx)(n.$n,{onClick:()=>i(),text:e._('Got it', 'groupBoardFavoriteEducationModal.doneButton', 'Done button for modal')})}),heading:(0,z.jsxs)(n.az,{alignItems:"center",display:"flex",justifyContent:"center",paddingX:4,paddingY:6,position:"relative",children:[(0,z.jsx)(n.az,{maxWidth:400,children:(0,z.jsx)(n._Y,{align:"center",size:"600",children:(0,$.vQ)(e._('{{ heart }}  is now  {{ star }}', 'groupBoardFavoriteEducationModal.heading', 'Heading for modal informing users of changes from group board reactions to board favorites'),{heart:(0,z.jsx)(n.az,{display:"inlineBlock",paddingX:1,children:(0,z.jsx)(n.In,{accessibilityLabel:e._('Heart icon', 'groupBoardFavoriteEducationModal.headingHeartIcon', 'Accessibility label for heart icon'),color:"default",icon:"heart-fill",size:16})}),star:(0,z.jsx)(n.az,{display:"inlineBlock",paddingX:1,children:(0,z.jsx)(n.In,{accessibilityLabel:e._('Favorite icon', 'groupBoardFavoriteEducationModal.headingFavoriteIcon', 'Accessibility label for favorite icon'),color:"default",icon:"star-fill",size:16})})})})}),(0,z.jsx)(n.az,{padding:6,position:"absolute",right:!0,top:!0,children:(0,z.jsx)(n.K0,{accessibilityLabel:e._('Close', 'groupBoardFavoriteEducationModal.closeModalButton', 'Accessibility label for close modal button'),icon:"close",iconColor:"default",onClick:o,size:"md"})})]}),onDismiss:o,size:"sm",children:t})})}var q=i(306783),K=i(513010),G=i(504252),W=i(102593),Y=i(411805),V=i(524833),Q=i(530597);function X({board:e,currentFilter:t,eligibleFilters:i,isOwnBoard:a,surface:l,setCurrentFilter:s,setTitle:d}){(0,r.useEffect)(()=>{(0,o.A)("ActionBarFilterButton","/app/www/save/board/BoardDefaultTabContent/ActionBarFilterButton.tsx")},[]);let c=(0,q.WO)(),{logContextEvent:u}=(0,h.o)(),_=(0,U.A)(),p=(0,r.useRef)(null),f=c?.boardPinDensity,[m,b]=(0,r.useState)(!1),g=()=>{b(!1)},A=e=>{(0,V.A)({boardDensity:e,component:"board"===l?13183:13187,viewType:"board"===l?5:164},u),(0,Q.A)({density:e,surface:"board"}),c?.setBoardPinDensity(e)},y=[],x={[-1]:12111,6:12227};if(i){let o={items:i.map(i=>({isSelected:i.pin_type===t,onClick:()=>{u({event_type:101,component:13475,element:x[i.pin_type??-1],object_id_str:e.id,view_type:5,view_parameter:a?3069:3070}),s(i.pin_type??-1),d(-1===i.pin_type?null:i.text),g()},text:i.text??""})),label:_._('Filter by type', 'board.experimentalBoardActionBar.filterOptions', 'List of board filter options')};y.push(o)}return y.push({items:[{isSelected:"regular"===f,onClick:()=>{g(),A("regular")},text:_._('Default', 'BoardHeader.ActionBar.DensityOption-Default', 'Clickable text to set board view density to default mode')},{isSelected:"dense"===f,onClick:()=>{g(),A("dense")},text:_._('Compact', 'BoardHeader.ActionBar.DensityOption-Compact', 'Clickable text to set board view density to compact mode')}],label:_._('View options', 'BoardHeader.ActionBar.ViewOptions', 'List of board view options')}),(0,z.jsxs)(r.Fragment,{children:[(0,z.jsx)(n.az,{ref:p,children:(0,z.jsx)(n.K0,{accessibilityControls:"filter_board",accessibilityExpanded:m,accessibilityLabel:_._('Board Filter', 'board.experimentalBoardActionBar.boardFilter', 'Filter to select specific Pins on board'),accessibilityPopupRole:"menu",icon:"filter-horizontal",iconColor:"default",onClick:()=>{u({event_type:101,element:12020,object_id_str:e.id,view_type:5,view_parameter:a?3069:3070}),b(!m)},selected:m,size:"lg"})}),m&&(0,z.jsx)(n.ms,{anchor:p.current,disableMobileUI:!0,id:"filter_board",onDismiss:g,children:y.map(({items:e,label:t})=>(0,z.jsx)(n.ms.Section,{label:t,children:e.map(({isSelected:e,onClick:t,text:i})=>(0,z.jsx)(n.ms.Item,{onSelect:t,option:{label:i,value:i},selected:e?{label:i,value:i}:null},i))},t))})]})}let Z=(0,m.Yd)(1000332)(function({board:e,currentFilter:t,isHidePinCount:i,isOwnBoard:o,paddingX:a=8,section:l,setCurrentFilter:s,showExperienceTooltip:d}){let c=(0,U.A)(),{eligible_pin_type_filters:u}=l??e,[_,p]=(0,r.useState)(null),h=(0,r.useRef)(null),f=l?l.pin_count:e.pin_count,{experimentalGutter:b}=(0,Y.A)();return(0,z.jsxs)(r.Fragment,{children:[(0,z.jsxs)(n.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:b?{paddingLeft:b,paddingRight:b}:{}},direction:"row",display:"flex",justifyContent:i?"end":"between",paddingX:a,children:[!i&&(0,z.jsx)(n.az,{flex:"grow",children:(0,z.jsx)(n._Y,{accessibilityLevel:2,size:"400",children:t>0&&_?_:(0,$.vQ)(c.ngettext('{{ pinCount }} Pin', '{{ pinCount }} Pins', f ?? 0, 'board.experimentalBoardActionBar.pinCount', 'Number of Pins on board or section'),{pinCount:f})})}),(0,z.jsx)(n.az,{ref:h,children:(0,z.jsx)(X,{board:e,currentFilter:t,eligibleFilters:u?.filter(e=>5!==e.pin_type),isOwnBoard:o,setCurrentFilter:s,setTitle:p,surface:l?"section":"board"})})]}),d&&h&&(0,z.jsx)(n.Wd,{children:(0,z.jsx)(m.Je,{eligibleIds:[502974],placementId:1000332,children:({dismiss:e,experience:{display_data:t}})=>(h&&h.current?.scrollIntoView(!1),(0,z.jsx)(n.fT,{anchor:h.current,idealDirection:"down",message:t.text,onDismiss:e}))})})]})});var ee=i(972025),et=i(241946),ei=i(191350),eo=i(955531),er=i(451093),ea=i(113314),el=i(929440);let en=()=>{};function es({board:e,currentView:t,handleContentViewChange:i,handleSetCurrentModal:l,handleShowEditSectionModal:s,handleShowMergeSectionsConfirmationModal:d,isBoardPreviewMode:c,isHidePinCount:u,isOwnerOrCollaborator:_,isOwnBoard:p,isPinGridSorted:h,refreshBoardData:f=en,refreshSectionData:m=en,section:b}){(0,r.useEffect)(()=>{(0,o.A)("BoardAndSectionPageContent","/app/www/save/board/BoardPageContainer/BoardAndSectionPageContent.tsx")},[]);let g=(0,A.A)(),y=(0,et.A)({board:e,viewer:g}),x=(e.access||[]).includes("write"),v=(0,q.WO)()?.boardPinDensity,w=(0,ea.A)(b?(0,er.A)(e,b):""),[j,P]=(0,r.useState)(-1),[B,C]=(0,r.useState)(!1),S=(0,a.wA)();(0,r.useEffect)(()=>()=>{-1!==j&&(b?S((0,K.eO)(G.A.BOARD_SECTION_PINS,b.id??"")):S((0,K.eO)(G.A.BOARDFEED,e.id)))},[e,j,S,b]);let I=(0,r.useCallback)(()=>{j>0&&(P(-1),b?m():f())},[j,m,f,b]),E=(0,r.useMemo)(()=>b?{currentFilter:j,eligibleFilters:b.eligible_pin_type_filters,refreshData:m,sectionId:b.id}:{currentFilter:j,eligibleFilters:e.eligible_pin_type_filters,refreshData:f,setShowExperienceTooltip:C},[b,e.eligible_pin_type_filters,j,f,m]);return b?(0,z.jsx)(ee.T,{value:E,children:(0,z.jsxs)(r.Fragment,{children:[_&&!c&&(0,z.jsx)(Z,{board:e,currentFilter:j,isOwnBoard:p,section:b,setCurrentFilter:P,showExperienceTooltip:!1}),(0,z.jsx)(eo.A,{board:e,boardSectionId:b.id,currentFilter:j,denseViewSelected:x&&"dense"===v,inSectionOrganizationMode:!1,inSelectAll:!1,isOwnBoard:p,isOwnerOrCollaborator:_,refreshFilteredFeed:I,renderFooterStory:t=>!e.archived_by_me_at&&_&&(0,z.jsx)(n.az,{marginBottom:12,children:(0,z.jsx)(ei.A,{children:(0,z.jsx)(el.A,{collection:b,storyId:t,url:w})})}),viewer:g,viewParameter:y})]})}):(0,z.jsx)(ee.T,{value:E,children:(0,z.jsxs)(r.Fragment,{children:[_&&!c&&(0,z.jsx)(N.A,{isGetServerRenderGridHeaderStyles:!0,children:(0,z.jsx)(Z,{board:e,currentFilter:j,isHidePinCount:u,isOwnBoard:p,paddingX:0,setCurrentFilter:P,showExperienceTooltip:B})}),(0,z.jsx)(W.A,{actions:{onBoardOrganizeClick:en},board:e,currentFilter:j,currentView:t,enableReordering:_,isBoardPreviewMode:c,isOwnBoard:p,isPinGridSorted:h,onContentViewChange:i,onShowEditSectionModal:s,onShowMergeSectionsConfirmationModal:(e,t)=>{l(R.a.sectionMergeConfirm),d(e,t)},refreshFilteredFeed:I,viewParameter:y}),_&&(0,z.jsx)(J,{})]})})}var ed=i(601185),ec=i(705739),eu=i(236503),e_=i(998317),ep=i(592023),eh=i(382188),ef=i(257300),em=i(634224),eb=i(832057),eg=i(574704),eA=i(430705),ey=i(703334);function ex({onDismiss:e,boardId:t}){(0,r.useEffect)(()=>{(0,o.A)("ReportBoard","/app/www/profile/UserProfileHeader/ModalContents/FlagProfile/ReportBoard.tsx")},[]);let{data:i}=(0,eA.A)({name:"BoardResource",options:{board_id:t,field_set_key:"detailed"},noCache:!0}),{showErrorToast:a,showSuccessToast:l}=(0,eg.A)(),[n,s]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),{checkExperiment:u}=(0,ed.A)();(0,w.A)(()=>{(async()=>{try{let e=await (0,em.A)(t);e?s(e):a()}catch{a()}})()});let _=async({reasonKey:i})=>{try{await (0,eb.A)(t,{reason:i}),e(),l()}catch{e(),a()}},p=async e=>{if(!e)return null;try{return(await (0,ef.A)({url:"/v3/sensitivity/report/",method:"GET",data:{sensitivity_type:e,object_type:"board"}})).resource_response.data}catch{return null}},h=async({reasonKey:i,selectedReason:o})=>{try{let[r]=await Promise.all([p(o?.sensitivity_type??void 0),(0,eb.A)(t,{reason:i})]);r?c(r):(e(),l())}catch{e(),a()}};return d?(0,z.jsx)(ey.A,{dismiss:e,objectType:5,sensitivity:d,viewParameter:3846}):(0,z.jsx)(eh.A,{handleSubmitReport:u("ps_dweb_report_advisories_boards_and_messages").anyEnabled?h:_,objectToReport:{type:"board",id:t,userToBlock:i?.owner&&i.owner.id?{id:i.owner.id,fullName:i.owner.full_name,blockedByMe:i.owner.blocked_by_me,username:i.owner.username||""}:null},onDismiss:e,reportingReasons:n})}var ev=i(57302),ew=i(135914);function ej({boardId:e,ownerId:t,ownerUsername:i,ownerName:o,ownerImgSrc:a,ownerIsAdsOnlyProfile:l,ownerAdsOnlyProfileSite:n,children:s}){let{data:d,isLoaded:c}=(0,eA.A)({name:"ApiResource",options:{url:(0,ew.A)({boardId:e})?.concat("collaborators/"),data:{fields:["user.domain_verified","user.explicitly_followed_by_me","user.full_name","user.id","user.image_medium_url","user.image_small_url","user.is_default_image","user.location","user.twitter_url","user.type","user.username","user.verified_identity"],page_size:10}},noCache:!0});return s((0,r.useMemo)(()=>{let e=[{name:o,src:a,href:`/${i}/`,id:t,is_ads_only_profile:l,ads_only_profile_site:n}];return c&&d&&d.length>0&&d.forEach(t=>{e.push((0,ev.A)(t))}),e},[d,c,n,t,a,l,o,i]))}var eP=i(326580),eB=i(743372),eC=i(305147),eS=i(567176);function ez(e){(0,r.useEffect)(()=>{(0,o.A)("FollowingToast","/app/www/board/Header/ActionBar/FollowingToast.tsx")},[]);let{boardImage:t,boardName:i,boardUrl:a,onHide:l}=e,s=(0,U.A)(),d=(0,z.jsx)(n.KJ,{overflow:"noWrap",children:(0,$.vQ)(s._('Now following {{ boardName }}', 'BoardFollowButton.FollowingToast.nowFollowing', 'Toast text displayed when a user follows a board'),{boardName:(0,z.jsx)(n.KJ,{inline:!0,overflow:"noWrap",weight:"bold",children:i},"boardName")})});return(0,z.jsx)(eS.A,{href:a,imageUrl:t,onHide:l,text:d})}var eI=i(283034),eE=i(520884);function eO(e){(0,r.useEffect)(()=>{(0,o.A)("EllipsisMenuButton","/app/www/save/board/BoardPageContainer/EllipsisMenuButton.tsx")},[]);let t=(0,U.A)(),{bgColor:i,board:l,canCreatePincode:s,canEdit:d,handleCreatePincode:c,handleOpenSendBoardFlyout:u,onEditClick:_,onReportClick:p,showFollow:h,showShare:m,size:b}=e,{id:g,name:A,url:y,image_cover_url:x}=l,[w,j]=(0,r.useState)(l.followed_by_me),{showOneToast:P}=(0,v.CG)(),B=(0,a.wA)(),C=(0,f.A)(),S=(0,eB.A)(),I=({event:e})=>{if(C){e.stopPropagation(),C();return}w?(B((0,eI.X)(g,S)),j(!1)):(B((0,eI.e)(g,S)),j(!0),P(({hideToast:e})=>(0,z.jsx)(ez,{boardImage:x??"",boardName:A,boardUrl:y,onHide:e})))},E={edit:t._('Edit', 'BoardPage.ActionBar.PartnerEdit', 'Clickable text to enter board editing mode'),create_pincode:t._('Create Pincode', 'BoardPage.ActionBar.PartnerPincode', 'Clickable text to trigger Pincode modal'),share:t._('Share', 'BoardPage.ActionBar.EllipsisButton', 'Button caption to share board'),unfollow:t._('Unfollow', 'BoardPage.ActionBar.EllipsisButton', 'Button caption to unfollow board'),follow:t._('Follow', 'BoardPage.ActionBar.EllipsisButton', 'Button caption to follow board'),report:t._('Report', 'profileHeader.actionBar.overflowFlyout.report', 'Overflow menu option on a user profile to report a complaint about that user')};return(0,z.jsx)(eC.A,{bgColor:i,icon:"ellipsis",id:"more-board-options",label:t._('Other actions', 'profileHeader.actionBar.overflow', 'Accessibility label for button to open other options flyout'),size:b,children:()=>(0,z.jsxs)(n.ms.Section,{label:t._('Board options', 'profileHeader.actionBar.overflow.header', 'Accessibility label header for board options flyout'),children:[d&&_&&(0,z.jsx)(n.ms.Item,{onSelect:()=>{_()},option:{label:E.edit,value:E.edit}}),d&&s&&c&&(0,z.jsx)(n.ms.Item,{onSelect:()=>{c()},option:{label:E.create_pincode,value:E.create_pincode}}),m&&u&&(0,z.jsx)(eE.A,{boardKey:{type:"Legacy",data:l},onCreatePincode:c,onOpen:u,children:({onClick:e})=>(0,z.jsx)(n.ms.Item,{onSelect:e,option:{label:E.share,value:E.share}})}),h&&(0,z.jsx)(r.Fragment,{children:w?(0,z.jsx)(n.ms.Item,{onSelect:I,option:{label:E.unfollow,value:E.unfollow}}):(0,z.jsx)(n.ms.Item,{onSelect:I,option:{label:E.follow,value:E.follow}})}),(0,z.jsx)(n.ms.Item,{onSelect:p,option:{label:E.report,value:E.report}})]})})}var eT=i(278105),eF=i(753771),ek=i(803489),eD=i(427471),eM=i(393320),eR=i(703672),eL=i(971289),eN=i(989457),eH=i(570805);function eU(e){(0,r.useEffect)(()=>{(0,o.A)("Facepile","/app/www/save/board/BoardCollaboratorFacepile/Facepile.tsx")},[]);let{faces:t,maxFaces:i,numFaces:a,onOverflowClick:l,shouldNavigate:s=!0}=e,d=[...t].reverse(),c=t.length>i?d.slice(0,i+1):d,u=a-i,_=(0,A.A)(),p=_.isAuth?_?.avatar_color_index:void 0;return(0,z.jsx)(n.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{flexDirection:"row-reverse"}},display:"flex",position:"relative",children:c.map((e,t)=>{let{name:i,src:o,href:r,isDim:a}=e;if(0===t&&u>0)return(0,z.jsx)(n.az,{dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},height:44,marginStart:-2,overflow:"hidden",rounding:"circle",width:44,children:o&&(0,z.jsx)(n._V,{alt:i,fit:"contain",naturalHeight:44,naturalWidth:44,src:o,children:(0,z.jsx)(n.Rp,{fullHeight:!0,fullWidth:!0,onTap:l,rounding:"circle",children:(0,z.jsx)(n.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.4)"}},display:"flex",height:"100%",justifyContent:"center",rounding:"circle",width:"100%",children:(0,z.jsx)(n.KJ,{color:"inverse",size:"200",weight:"bold",children:u>99?"99+":u})})})})},t);{let e=(0,z.jsx)(n.az,{dangerouslySetInlineStyle:{__style:{opacity:a?.5:1}},marginStart:-2,children:(0,z.jsx)(eN.eu,{color:p,name:i,outline:!0,size:"sm",src:o})},t);return s?(0,z.jsx)(n.$A,{href:r,rounding:"circle",children:e},t):e}})})}function e$({invitedByUser:e,isAccepted:t,onDecline:i,onAccept:a,createdAt:l}){(0,r.useEffect)(()=>{(0,o.A)("BoardCollabInviteBanner","/app/www/BoardCollab/BoardCollabInviteBanner.tsx")},[]);let s=(0,U.A)(),d=(0,A.A)(),c=d.isAuth?d?.avatar_color_index:void 0,{first_name:u,full_name:_,username:p,image_medium_url:h}=e,f=u||_||s._('others', 'Default text when board colalborator name is not known.', 'Default text when board colalborator name is not known.');return(0,z.jsx)(n.mc,{children:t?(0,z.jsxs)(n.az,{alignItems:"center",borderColor:"decorative",borderWidth:"sm",direction:"row",display:"flex",marginEnd:-1,marginStart:-1,paddingX:5,paddingY:3,rounding:200,width:"100%",children:[(0,z.jsx)(eU,{faces:[{href:d.isAuth?`/${d.username}`:"",name:d.isAuth?d.fullName:"",src:d.isAuth?d.imageMediumUrl:""},{href:`/${p}`,name:_,src:h}],maxFaces:2,numFaces:2}),(0,z.jsxs)(n.az,{marginStart:2,children:[(0,z.jsx)(n.KJ,{weight:"bold",children:s._('You\'re in!', 'Text showing that a user has accepted the board invite and is now a part of the board', 'Text showing that a user has accepted the board invite and is now a part of the board')}),(0,z.jsx)(n.KJ,{children:(0,eH.A)(s._('Start collaborating with {{ invitedByUserName }} on this board', ' - ', ' -- '),{invitedByUserName:f})})]})]}):(0,z.jsx)(n.az,{color:"default",elevation:"shadowFloating",marginEnd:-1,marginStart:-1,paddingX:6,paddingY:6,rounding:600,width:540,children:(0,z.jsxs)(n.so,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,z.jsx)(n.az,{marginEnd:2,children:(0,z.jsx)(eN.eu,{color:c,name:_,size:"md",src:h})}),(0,z.jsx)(n.az,{flex:"grow",children:(0,z.jsx)(n.KJ,{color:"default",inline:!0,children:(0,$.vQ)(s._('{{ user }} invited you to collaborate on this board {{ createdAt }}', 'web.boardView.inviteCard.text', 'Label used to indicate a Pinner has invited you to join a board'),{user:(0,z.jsx)(n.KJ,{color:"default",inline:!0,weight:"bold",children:(0,z.jsx)(n.N_,{display:"inlineBlock",href:`/${p}`,underline:"hover",children:_})},p),createdAt:(0,z.jsx)(n.KJ,{color:"subtle",inline:!0,children:l})})})}),(0,z.jsxs)(n.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},display:"flex",paddingX:1,children:[(0,z.jsx)(n.az,{display:"inlineBlock",marginEnd:2,children:(0,z.jsx)(n.$n,{color:"secondary",onClick:i,size:"lg",text:s._('Decline', 'decline board collaborator invite or request', 'decline board collaborator invite or request')})}),(0,z.jsx)(n.$n,{color:"primary",onClick:a,size:"lg",text:s._('Accept', 'Text to accept a board collaboration invite', 'Text to accept a board collaboration invite')})]})]})})})}var eJ=i(955170);function eq({boardId:e,inviteCode:t,shouldAutoAcceptBoardInvite:i,userInviterId:l}){(0,r.useEffect)(()=>{(0,o.A)("BoardCollabInviteBannerContainer","/app/www/BoardCollab/BoardCollabInviteBannerContainer.tsx")},[]);let s=(0,U.A)(),d=(0,v.CG)(),c=(0,eM.A)(),[u,_]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),f=(0,eL.qJ)(),m=(0,A.A)(),b=(0,a.wA)(),g={board_id:e,field_set_key:"boardBanner",invite_code:t,invited_user_id:m.isAuth&&m.id},y=(0,eJ.y9)(),x=(0,eJ.JQ)();(0,r.useEffect)(()=>{l&&i&&(y(e).then(()=>{b((0,eJ.s5)(e)),f&&d.showToast(({hideToast:e})=>(0,z.jsx)(eS.A,{duration:5e3,onHide:e,text:s._('You\'re in! Save Pins, plan with collaborators, and more!', 'BoardCollabInviteBannerContainer.useEffect.acceptedInviteToast', 'Text in toast after accepting a board collaborator invite.')}))}),eD.A.create("UserResource",{field_set_key:"grid_item",user_id:l}).callGet().then(({resource_response:e})=>{let t=e&&e.data;t&&h(t)}))},[i,l]);let{data:w}=(0,eA.A)({name:"BoardInviteResource",options:g}),j=!!(l&&i)||u,P=!["new","contact_request_not_approved"].includes(w?.status||""),B=t=>{(t?y(e):x(e,g.invited_user_id||"")).then(()=>{t&&(b((0,eJ.s5)(e)),_(!0),d.showToast(({hideToast:e})=>(0,z.jsx)(eS.A,{duration:5e3,onHide:e,text:s._('You\'re in! Save Pins, plan with collaborators, and more!', 'BoardCollabInviteBannerContainer.useEffect.acceptedInviteToast', 'Text in toast after accepting a board collaborator invite.')}))),b((0,eR.Q5)("BoardInviteResource",g))})},C=w?.invited_by_user||p,S=j?f:P;return!C||S?null:(0,z.jsx)(n.az,{marginTop:3,paddingY:0,children:(0,z.jsx)(e$,{createdAt:c(w?.created_at||"",!0),invitedByUser:C,isAccepted:j,onAccept:()=>B(!0),onDecline:()=>B(!1)})})}function eK({boardId:e}){let t=(0,l.zy)(),i=t&&t.search?(0,ek.A)(t.search):{},o=i.invite_code,r=i.accept_invite,a=i.inviter_user_id;return(0,z.jsx)(eq,{boardId:e,inviteCode:o,shouldAutoAcceptBoardInvite:r,userInviterId:a})}let eG=function(e){let{board:t}=e,{id:i,owner:o,sensitivity:a}=t,l=(0,A.A)(),s=l.isAuth?l.id:"",d=o?.id===s,c=(0,eu.bh)(a),{checkExperiment:u}=(0,ed.A)(),_=u("ps_board_advisories_ui_refresh").anyEnabled||c;return(0,z.jsxs)(r.Fragment,{children:[!c&&(0,z.jsx)(eK,{boardId:i}),_&&(0,e_.Ay)(a).hasNotices&&a&&(0,z.jsx)(n.az,{paddingY:10,children:(0,z.jsx)(ep.A,{boardId:i,boardName:t.name,notices:a.notices,sensitivity:a,viewParameter:d?3069:3070,viewType:5})})]})};var eW=i(373865),eY=i(568016);function eV(e){(0,r.useEffect)(()=>{(0,o.A)("BoardPageHeader","/app/www/save/board/Headers/BoardHeader/BoardPageHeader.tsx")},[]);let{board:t,collaborators:i,handleCreatePincode:a,handleShowCollabAndPermissionsModal:l,isBoardPreviewMode:s,inRelocateBoardShareButtonExp:d,overFlowActionsButton:c,showPulsar:u,setBoardPreviewMode:_,userBlocked:h}=e,{access:f,archived_by_me_at:m,collaborator_requests_enabled:b,name:g,owner:y,privacy:x,should_show_board_collaborators:v}=t,{nonDisplayedCollaboratorCount:w}=(0,eY.A)({boardCollaboratorCount:t.collaborator_count,collaborators:i,showOnlyOwner:!v,ownerName:y?.full_name}),B=(0,A.A)(),C=(0,j.A)(),S=(0,P.Nn)(B,t.owner?.id||"",C),I=f&&f.includes("write")||S,E=(0,p.A)(t.collaborated_by_me,t.owner?.id,B)||S,O=x===eF.A.BoardPrivacy.SECRET,T=!I&&!h&&b&&!(B.isAuth&&B.isPrivateProfile);return(0,z.jsxs)(n.az,{"data-test-id":"board-header-with-image-container",direction:"column",display:"flex",paddingY:8,children:[(0,z.jsx)(n.so,{alignItems:"stretch",justifyContent:"center",children:(0,z.jsx)(n.az,{maxWidth:800,children:(0,z.jsx)(eG,{board:t})})}),(0,z.jsx)(n.az,{marginTop:4,paddingX:2,children:(0,z.jsx)(eW.A,{board:t,boardName:g??"",collaborators:i,description:t.description??"",handleShowCollabAndPermissionsModal:l,inRelocateBoardShareButtonExp:d,isArchived:!!m,isBoardPreviewMode:s,isOwnerOrCollaborator:E,isSecret:O,nonDisplayedCollaboratorCount:w,onCreatePincode:a,overFlowActionsButton:c,pinCount:t.pin_count??0,sectionCount:t.section_count??0,setBoardPreviewMode:_,showJoinButton:!!T,showPulsar:u})})]})}var eQ=i(618839),eX=i(385800);let eZ=e=>{(0,r.useEffect)(()=>{(0,o.A)("SectionHeader","/app/www/save/board/Headers/SectionHeader/SectionHeader.tsx")},[]);let{boardName:t,boardUrl:i,children:a,description:l,overFlowActionsButton:s,sectionName:d,ref:c}=e;return(0,z.jsxs)(n.az,{ref:c,display:"flex",justifyContent:"center",marginBottom:8,paddingX:8,width:"100%",children:[(0,z.jsxs)(n.so,{alignItems:"stretch",direction:"column",gap:2,justifyContent:"start",maxWidth:488,children:[(0,z.jsx)(eQ.A,{children:(0,z.jsx)(n.az,{marginTop:4,children:(0,z.jsx)(eX.e,{children:({active:e,focused:o,hovered:r,onBlur:a,onFocus:l,onMouseEnter:s,onMouseLeave:d})=>(0,z.jsx)(n.$A,{href:i??"",onBlur:a,onFocus:l,onMouseEnter:s,onMouseLeave:d,children:(0,z.jsx)(n._Y,{align:"center",color:e||o||r?"default":"subtle",children:t})})})})}),(0,z.jsx)(eQ.A,{children:(0,z.jsxs)(n.az,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:-2,maxWidth:"100%",children:[(0,z.jsx)(n._Y,{align:"center",lineClamp:1,children:d}),!!s&&(0,z.jsx)(n.az,{paddingX:1,children:s})]})}),!!l&&(0,z.jsx)(eQ.A,{children:(0,z.jsx)(n.KJ,{align:"center",children:l})})]}),a&&(0,z.jsx)(n.az,{marginTop:8,children:a})]})};function e0({board:e,handleBoardEditClick:t,handleFollowersClick:i,handleSectionEditClick:a,handleShowBoardArchiveConfirmation:l,handleShowBoardUnarchiveConfirmation:s,handleShowCollabAndPermissionsModal:d,handleShowCreatePincodeModal:c,handleShowMergeModal:u,isBoardPreviewMode:h,section:f,showPulsar:m,setBoardPreviewMode:b}){(0,r.useEffect)(()=>{(0,o.A)("BoardAndSectionPageHeader","/app/www/save/board/BoardPageContainer/BoardAndSectionPageHeader.tsx")},[]);let g=(0,A.A)(),y=(0,j.A)(),x=(0,ec.A)(),v=x&&(0,_.A)(e.privacy)?`?orbac_subject_id=${x}`:"",{name:w,sensitivity:B,access:C,url:S=""}=e,[I,E]=(0,r.useState)(!1),O=(0,P.Nn)(g,e.owner?.id||"",y),T=(0,eu.bh)(B),{checkExperiment:F}=(0,ed.A)(),k=F("ps_board_advisories_ui_refresh").anyEnabled||T,{anyEnabled:D}=F("ce_dweb_relocate_board_share_button"),M=C&&C.includes("write")||O?eP.B:ej,R=(0,p.A)(e.collaborated_by_me,e.owner?.id,g)||O,L=null;L=R?(0,z.jsx)(eT.A,{bgColor:f?"secondary":"default",board:e,excludeShareOption:!0,hasBoardToolStyles:D,onArchiveClick:l,onCreatePincode:c,onEditBoardClick:t,onEditSectionClick:a,onMergeClick:u,onUnarchiveClick:s,showCreatePinCodeOption:g.isAuth&&g.isPartner,size:"lg",surface:f?"section":"board"}):(0,z.jsx)(eO,{bgColor:e.header?.large_image_url||!D?"default":"secondary",board:e,onReportClick:()=>E(!0),showFollow:!0,size:D?"xl":"lg"});let N=k&&(0,e_.Ay)(B).hasNotices;return(0,z.jsxs)(r.Fragment,{children:[I&&(0,z.jsx)(ex,{boardId:e.id,onDismiss:()=>E(!1)}),f?(0,z.jsxs)(r.Fragment,{children:[N&&(0,z.jsx)(eQ.A,{children:(0,z.jsx)(n.az,{maxWidth:800,paddingY:10,children:B&&(0,z.jsx)(ep.A,{boardId:e.id,boardName:e.name,boardSectionId:f.id,isOwnBoard:O,notices:B.notices,sensitivity:B,viewParameter:O?3069:3070,viewType:5})})}),(0,z.jsx)(eZ,{boardName:w,boardUrl:`${S}${v}`,description:f.description??"",overFlowActionsButton:L,sectionName:f.title??""})]}):(0,z.jsx)(n.az,{"data-test-id":"board-header",paddingX:2,children:(0,z.jsx)(M,{boardId:e.id,ownerAdsOnlyProfileSite:e.owner?.ads_only_profile_site||"",ownerId:e.owner?.id||"",ownerImgSrc:e.owner?.image_key||e.owner?.image_medium_url||e.owner?.image_small_url||"",ownerIsAdsOnlyProfile:e.owner?.is_ads_only_profile||!1,ownerName:e.owner?.full_name||"",ownerUsername:e.owner?.username||"",children:t=>(0,z.jsx)(eV,{board:e,collaborators:t,handleCreatePincode:c,handleShowCollabAndPermissionsModal:d,inRelocateBoardShareButtonExp:D,isBoardPreviewMode:h,onFollowersClick:i,overFlowActionsButton:L,setBoardPreviewMode:b,showPulsar:m,userBlocked:!!e.owner?.blocked_by_me})})})]})}function e1({boardId:e,collaboratorId:t,collaboratorUsername:i}){(0,r.useEffect)(()=>{(0,o.A)("BoardOwnershipTransferUpsell","/app/www/save/board/BoardPageContainer/BoardOwnershipTransferUpsell.tsx")},[]);let s=(0,a.wA)(),d=(0,l.Zp)(),c=(0,U.A)();return(0,z.jsx)(n.so,{justifyContent:"center",width:"100%",children:(0,z.jsx)(n.az,{marginTop:8,maxWidth:960,paddingX:8,children:(0,z.jsx)(n.Sl,{message:c._('You\u2019ve been requested to take over ownership of this board', 'boardOwnershipTransferUpsell.message', 'Message informing user they have received an ownership transfer request'),primaryAction:{accessibilityLabel:c._('Accept', 'boardOwnershipTransferUpsell.acceptAccessibilityLabel', 'Accessibility label for accept button on upsell'),label:c._('Accept', 'boardOwnershipTransferUpsell.acceptLabel', 'Label for accept button on upsell'),onClick:()=>{(0,ef.A)({url:"/v3/boards/{board}/collaborators/requests/ownership/",urlParams:{board:e},method:"PUT",data:{collaborator:t}}),s((0,D.SA)(i)),d(`/${i}/`)}},secondaryAction:{accessibilityLabel:c._('Decline', 'boardOwnershipTransferUpsell.declineAccessibilityLabel', 'Accessibility label for decline button on upsell'),label:c._('Decline', 'boardOwnershipTransferUpsell.declineLabel', 'Label for decline button on upsell'),onClick:()=>{s((0,eJ.Im)(e,t))}},title:c._('Board ownership request pending', 'boardOwnershipTransferUpsell.title', 'Title for board ownership transfer upsell')})})})}eZ.displayName="SectionHeader";var e3=i(734247);function e5({handleAddSection:e,handleCreatePin:t,handleCreateStoryPin:i,surface:a}){(0,r.useEffect)(()=>{(0,o.A)("FloatingAddButton","/app/www/save/board/BoardPageContainer/FloatingAddButton.tsx")},[]);let{logContextEvent:l}=(0,h.o)(),s=(0,U.A)(),d=(0,r.useRef)(null),c="board"===a?s._('Create a Pin or add a Section', 'BoardPage.ActionBar.AddPinOrSection', 'button triggering a flyout to create a pin or add a section'):s._('Create Pin', 'BoardPage.ActionBar.AddPin', 'button triggering a flyout to create a pin');return(0,z.jsx)(n.az,{bottom:!0,dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 20px rgba(0, 0, 0, 0.1)",left:"50%",transform:"translate(-50%)"}},marginBottom:4,position:"fixed",rounding:"circle",width:56,children:(0,z.jsx)(e3.A,{idealDirection:"up",isWithinFixedContainer:!0,onAddSection:e,onCreatePin:t,onCreateStoryPin:i,onOpen:()=>{l({event_type:101,element:10776,component:13216,view_type:5,view_parameter:3069})},surface:a,children:({active:e,accessibilityControls:t,openFlyout:i})=>(0,z.jsxs)(n.az,{color:"default",display:"inlineBlock",rounding:"circle",children:[(0,z.jsx)(n.kE,{ref:d,accessibilityControls:t,accessibilityExpanded:e,accessibilityLabel:c,accessibilityPopupRole:"dialog",icon:"plus",onClick:i,selected:e,tooltip:{text:c}}),(0,z.jsx)(m.xe,{anchors:{3006:d.current},idealDirection:"up",placementId:18}),(0,z.jsx)(m.X$,{anchors:{3006:d.current},idealDirection:"up",onAnchorTouch:"complete",placementId:18,scrollToDismiss:!0})]})})})}var e6=i(348681);let e2=i(523764).QZ+1;function e4({handleGoBack:e,hideSensitivityScreen:t,sensitivityScreenAuxData:i}){(0,r.useEffect)(()=>{(0,o.A)("SensitivityScreen","/app/www/save/board/BoardPageContainer/SensitivityScreen.tsx")},[]);let a=(0,U.A)();return(0,e6.r)({component:13860,view_type:5,aux_data:i}),(0,z.jsx)(n.az,{dangerouslySetInlineStyle:{__style:{background:"rgba(0,0,0,0.8)"}},display:"flex",height:"100%",justifyContent:"center",position:"fixed",top:!0,width:"100%",zIndex:new n.rk(e2),children:(0,z.jsx)(n.az,{dangerouslySetInlineStyle:{__style:{paddingTop:260}},children:(0,z.jsxs)(n.so,{alignItems:"center",direction:"column",gap:{row:0,column:8},maxWidth:500,children:[(0,z.jsx)(n._Y,{align:"center",color:"light",children:a._('This board may contain sensitive content', 'boardPageContainer.sensitivityScreen.heading', 'Warning text on board that may have sensitive content')}),(0,z.jsxs)(n.so,{gap:{row:6,column:0},children:[(0,z.jsx)(n.$n,{color:"primary",onClick:e,size:"lg",text:a._('Go back', 'boardPageContainer.sensitivityScreen.backButton', 'Text on button that lets user go back to previous page')}),(0,z.jsx)(n.$n,{color:"tertiary",onClick:t,size:"lg",text:a._('View anyway', 'boardPageContainer.sensitivityScreen.viewButton', 'Text on button that lets user past sensitivity screen')})]}),(0,z.jsx)(n.az,{paddingY:4,children:(0,z.jsx)(n.KJ,{align:"center",color:"light",overflow:"normal",size:"200",children:(0,$.vQ)(a._('If you see anything that violates our {{communityGuidelines}}, please report it to us by clicking the "..." button at the bottom of any Pin', 'boardPageContainer.sensitivityScreen.text', 'Text telling user how to report a Pin'),{communityGuidelines:(0,z.jsx)(n.KJ,{color:"light",inline:!0,size:"200",underline:!0,children:(0,z.jsx)(n.N_,{display:"inlineBlock",href:"https://policy.pinterest.com/en/community-guidelines",target:"blank",underline:"hover",children:a._('Community Guidelines', 'boardPageContainer.sensitivityScreen.communityGuidelines', 'Text that links to the community guidelines page')})})})})})]})})})}var e9=i(900303),e7=i(564153),e8=i(643294),te=i(31913),tt=i(787535),ti=i(505407);function to(e){(0,r.useEffect)(()=>{(0,o.A)("SectionAddedToast","/app/www/save/board/SectionAddedToast.tsx")},[]);let t=(0,U.A)(),{boardUrl:i="",onHide:a,slug:l}=e;return(0,z.jsx)(eS.A,{duration:2e3,href:`${i}${l}`,onHide:a,text:t._('Section added!', 'Toast for successfully creating a new board section', 'Toast for successfully creating a new board section')})}var tr=i(201968);let ta=()=>{};function tl({board:e,initialModalType:t,refreshBoardData:i=ta,refreshSectionData:S=ta,section:I,showPulsar:E}){let O,T,N;(0,r.useEffect)(()=>{(0,o.A)("BoardAndSectionToolsPageContainer","/app/www/save/board/BoardPageContainer/BoardAndSectionToolsPageContainer.tsx")},[]);let{experience:H,setExtraContext:$}=(0,g.A)(18,{board_id:e.id,pin_count:e.sectionless_pin_count??0}),[J,K]=(0,r.useState)(!1),{logContextEvent:G}=(0,h.o)(),W=(0,a.wA)(),Y=(0,f.A)(),{setFooterPlusButtonVisible:V}=(0,C.Y)(),Q=(0,A.A)(),X=(0,j.A)(),Z=(0,k.Sd)(Q,e),{collaborated_by_me:ee,id:ei,owner:eo,pending_ownership_transfer:er,pin_count:ea,privacy:el}=e,{pin_count:en}=I||{},ed=eo?.id||"",eu=(0,P.Hs)(Q,ed,X),e_=(0,p.A)(ee,ed,Q)||eu,ep=Q.isAuth&&Q.id===er,eh=Z?3069:3070,ef=(0,P.H7)(Q,X),em=ef&&(0,_.A)(el)?`?orbac_subject_id=${ef}`:"",eb=(0,d.A)(!0),eg=!!I;(0,r.useEffect)(()=>{let t="other";Z?t="own":(0,k.p$)(Q,e)&&(t="collaborator"),$({board_ownership:t})},[Z,Q,e,$]),(0,r.useEffect)(()=>(e_&&V(!1),()=>{V(!0)}),[V,e_]);let{showOneToast:eA}=(0,v.CG)(),ey=(0,l.Zp)(),ex=(0,l.zy)(),{previous:ev}=(0,y.qD)(),ew=0===ev.length;O=(0,q.WO)(),T=(0,A.A)(),N=(0,te.A)({url:"/v3/users/{user}/metadata/",params:{user:T.isAuth?T.username:""}}),(0,r.useEffect)(()=>{if(N&&N.data&&!O?.boardPinDensity){let e=N.data.profile_pin_rep_view_type;O?.setBoardPinDensity("dense"===e||"regular"===e?e:"regular")}});let{handleShowMergeSectionsConfirmationModal:ej,mergeConfirmationModalProps:eP,onConfirm:eB}=(0,L.A)({board:e}),eC=function(){let e=(0,U.A)(),{logContextEvent:t}=(0,h.o)(),i=(0,a.wA)(),{showBlockingActionToast:o}=(0,e7.A)(),r=(0,ec.A)();return({board:a,targetBoard:l})=>{t({event_type:7172,object_id_str:a.id,aux_data:{merge_flow:"menu"}}),i((0,e8.A)(a.id,l.id,r)).then(()=>{o({actionType:"merge",board:l})}).catch(t=>{e9.A.showError(t.message||e._('Failed to merge boards', 'Error message when failed to merge boards', 'Error message when failed to merge boards'))})}}(),eS={board_id:e.id,reason:e.sensitivity_screen?.reason||""},[ez,eI]=(0,r.useState)(!!e.sensitivity_screen?.show_warning&&!e_),[eE,eO]=(0,r.useState)(null),[eT,eF]=(0,r.useState)(t||null),[ek,eD]=(0,r.useState)(e&&(0,ti.A)(Q,e)||"custom"),eM=()=>eF(R.a.boardArchiveConfirmation),eR=()=>{ey(Q.isAuth?`/${(0,P.TO)(Q,X)}`:"/",{replace:!0})},eL=e=>{Y?Y():(eF(R.a.editSection),eO(e))},eN={board_id:e.id,board_pin_count:ea};return(0,w.A)(()=>{let{shouldOpenCollaboratorsModal:e}=ex.state||Object.freeze({});e&&(eF(R.a.collaboratorsAndPermissions),ey({...ex,state:{...ex.state,shouldOpenCollaboratorsModal:!1}},{replace:!0}))}),(0,z.jsx)(B.A,{objectIdStr:ei,viewParameter:eh,viewType:5,children:(0,z.jsx)(x.A,{auxData:eN,objectId:ei,view:5,viewParameter:(0,et.A)({board:e,viewer:Q}),children:(0,z.jsxs)(r.Fragment,{children:[(0,z.jsxs)(n.az,{dangerouslySetInlineStyle:{__style:ez?{filter:"blur(30px)"}:{}},children:[(0,z.jsx)(m.Vj,{experience:H,placementId:18}),(0,z.jsx)(b.A,{placementId:1000647}),(0,z.jsxs)(tr.o,{children:[(0,z.jsx)(e0,{board:e,handleBoardEditClick:()=>{G({event_type:101,element:10845,component:13216,view_type:5,view_parameter:3069}),eF(R.a.boardEdit)},handleFollowersClick:()=>{eF(R.a.followers)},handleSectionEditClick:()=>eL(),handleShowBoardArchiveConfirmation:eM,handleShowBoardUnarchiveConfirmation:()=>eF(R.a.boardUnarchiveConfirmation),handleShowCollabAndPermissionsModal:()=>eF(R.a.collaboratorsAndPermissions),handleShowCreatePincodeModal:()=>{Y?Y():(G({event_type:101,element:10781,component:13217,view_type:5,view_parameter:3069}),eF(R.a.pincode))},handleShowMergeModal:()=>{Y?Y():eF(R.a.mergeBoard)},isBoardPreviewMode:J,section:I,setBoardPreviewMode:K,showPulsar:E}),e_&&eg&&!J&&(0,z.jsx)(n.az,{marginBottom:6,marginTop:6,children:(0,z.jsx)(tt.A,{boardId:e.id,isBoardEmpty:!ea||!en,sectionId:I?.id})}),ep&&(0,z.jsx)(e1,{boardId:e.id,collaboratorId:Q.isAuth?Q.id:"",collaboratorUsername:Q.isAuth?Q.username:""}),eT!==R.a.jumpstartBoard&&(0,z.jsx)(x.A,{auxData:eN,component:178,objectId:e.id,view:5,viewParameter:Z?3069:3070,children:(0,z.jsx)(es,{board:e,currentView:ek,handleContentViewChange:e=>eD(e),handleSetCurrentModal:eF,handleShowEditSectionModal:eL,handleShowMergeSectionsConfirmationModal:ej,isBoardPreviewMode:J,isHidePinCount:!eg,isOwnBoard:Z,isOwnerOrCollaborator:e_,isPinGridSorted:"custom"!==ek,refreshBoardData:i,refreshSectionData:S,section:I})}),(0,z.jsx)(F,{boardId:e.id,handleShowArchiveConfirmation:eM}),e_&&(0,z.jsx)(e5,{handleAddSection:()=>{Y?Y():(G({event_type:101,element:10779,component:13217,view_type:5,view_parameter:3069}),eF(R.a.simpleCreateSection))},handleCreatePin:()=>{Y?Y():(G({component:13217,element:10643,event_type:101,view_parameter:3069,view_type:5}),ey("/pin-builder/",{state:{board:e,boardSection:I}}))},handleCreateStoryPin:()=>{Y?Y():(G({aux_data:{entry_type:"board_plus_button"},component:13217,element:10949,event_type:101,view_parameter:3069,view_type:5}),ey((0,s.A)(eb),{state:{board:e,entry_type:"board_plus_button",boardSection:I}}))},surface:I?"section":"board"})]}),eT&&(0,z.jsx)(M.A,{actions:{completeCreateSectionAction:t=>{Y?Y():(eF(null),eA(({hideToast:i})=>(0,z.jsx)(to,{boardUrl:e.url,onHide:i,slug:t.slug??""})))},onBoardArchiveChange:()=>{W((0,D.SA)(Q.isAuth?Q.username:""))},onBoardDelete:()=>{i(),eR()},onBoardLeave:()=>{W((0,D.SA)(Q.isAuth?Q.username:"")),eR()},onBoardMerge:t=>{eC({board:e,targetBoard:t}),eR()},onBoardSectionDelete:()=>{if(eO(null),eF(null),I){let t=e.url??"";ey(`${t}${em}`,{replace:!0})}},onBoardSectionSave:({slug:t})=>{eO(null),eF(null),I&&ey(`${e.url??""}${t}/${em}`,{replace:!0})},onConfirmMergeSection:eB},board:e,boardSection:I||eE,currentModal:eT,mergeConfirmationModalProps:eP,onClearModal:()=>eF(null)}),(0,z.jsx)(m.Gl,{placementId:18}),(0,z.jsx)(c.A,{placementId:18}),(0,z.jsx)(m.aR,{experience:H,placementId:18}),(0,z.jsx)(u.A,{experience:H,placementId:18})]}),ez&&(0,z.jsx)(e4,{handleGoBack:()=>{G({event_type:101,component:13860,element:73,view_type:5,aux_data:{...eS}}),ew&&ey("/",{replace:!0}),ey(-1)},hideSensitivityScreen:()=>{W((0,D.oj)(e.id)),G({event_type:101,component:13860,element:12448,view_type:5,aux_data:{...eS}}),eI(!1)},sensitivityScreenAuxData:eS})]})})})}},955531(e,t,i){i.d(t,{A:()=>m});var o=i(106386),r=i(693154),a=i(430705),l=i(870540),n=i(847753),s=i(394550),d=i(504252),c=i(47436),u=i(659664),_=i(873480),p=i(211592),h=i(562615);function f(e){let t=(0,r.A)(),i=(0,l.A)(),f=(0,n.H7)(t,i),m=(0,a.A)({name:"BoardSectionPinsResource",options:function(e,t,i,o=""){return{currentFilter:i,field_set_key:"react_grid_pin",is_own_profile_pins:t,page_size:25,redux_normalize_feed:!0,section_id:e,orbac_subject_id:o}}(e.boardSectionId,e.isOwnBoard,e.currentFilter,f)}),b=(0,a.A)({name:"BoardsResource",options:(0,s.A)(e.viewer.username,!0)}),g=(0,o.d4)(({feeds:t,desktopStories:i})=>(0,u.A)(t[`${d.A.BOARD_SECTION_PINS}:${e.boardSectionId}`],i));return(0,h.jsx)(c.A,{...e,...g,boardsResource:b,renderFeaturedBoardsStory:t=>(0,h.jsx)(_.A,{isOwnBoard:e.isOwnBoard,storyId:t}),renderMoreIdeas:t=>e.isOwnerOrCollaborator?null:(0,h.jsx)(p.default,{storyId:t}),resource:m})}f.displayName="BoardSectionPinGrid";let m=f},787535(e,t,i){i.d(t,{A:()=>S});var o=i(61163),r=i(859471),a=i(963522),l=i(668014),n=i(601185),s=i(161916),d=i(75840),c=i(705739),u=i(999813),_=i(979638),p=i(586733),h=i(296221),f=i(693154),m=i(844255),b=i(803489),g=i(168079),A=i(621877),y=i(370963),x=i(189851),v=i(201968),w=i(562615);let j=88,P=30,B=({boardTool:e,boardId:t,boardSectionId:i,iconSize:l=P,index:n,toolSize:s=j})=>{(0,r.useEffect)(()=>{(0,o.A)("BoardTool","/app/www/save/board/BoardTools/BoardTool.tsx")},[]);let[d,c]=(0,r.useState)(!1),u=(0,v.X)(),{icon:B,link:C,text:S,tool:z}=e,{section_slug:I}=(0,_.g)(),E=C.split("/").slice(0,3),O=C.split("/").slice(4),T=C.split("/")[3],F=6===z,k=T!==I&&i&&I&&!F?[...E,I,...O].join("/"):C,{isRTL:D}=(0,m._8)(),{logContextEvent:M}=(0,p.o)(),{owner:R,pin_count:L,section_count:N}=(0,x.oW)()(t)||{},H=(0,f.A)(),U=H.isAuth?H.id:"",$=R?.id===U?3069:3070,J=0===z,q=e=>{1===z&&M({event_type:e,view_type:i?164:5,view_parameter:$,element:10600,aux_data:{board_id:t,board_pin_count:L,board_section_count:N,board_section_id:i,grid_index:n}}),J&&M({event_type:e,view_type:i?164:5,view_parameter:$,component:14926,element:11990,aux_data:{board_id:t,board_session_id:u}}),F&&101===e&&M({event_type:101,component:14926,view_type:i?164:5,view_parameter:$,element:12893,aux_data:{board_id:t,board_session_id:u,board_section_id:i}})};(0,g.A)(()=>{q(120),J&&q(13)});let K=(0,r.useRef)(null),{setGroupBoardMessageButton:G}=(0,y.A)(),{conversations:{showConversationsDropdown:W},conversationOpen:Y,dropdownOpen:V,dropdownClose:Q}=(0,A.A)(),X=(0,_.zy)(),{conversation_id:Z,tab:ee}=(0,b.A)(X.search),et=4===z&&!!Z&&"inbox"===ee;et&&G(K.current);let ei=(e=>{switch(e){case 0:return 3003;case 1:return 3004;case 2:return 3005;default:return}})(z);return(0,w.jsxs)(r.Fragment,{children:[(0,w.jsx)(a.$A,{ref:K,accessibilityLabel:S,href:et?"":k,onBlur:()=>c(!1),onFocus:()=>c(!0),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onTap:()=>{et&&(q(102),W?Q():(V(),Y(Z))),(J||F)&&q(101)},rounding:600,children:(0,w.jsxs)(a.az,{dangerouslySetInlineStyle:{__style:{paddingBottom:"1px"}},direction:"column",display:"flex",justifyContent:"center",children:[(0,w.jsx)(a.az,{alignItems:"center",alignSelf:"center",color:d?void 0:"secondary",dangerouslySetInlineStyle:d?{__style:{backgroundColor:"#e2e2e2"}}:void 0,display:"flex",height:s,justifyContent:"center",rounding:600,width:s,children:(0,w.jsx)(a.In,{accessibilityLabel:S,color:"default",icon:"text-align-left"===B&&D?"text-align-right":B,size:l})}),(0,w.jsx)(a.az,{paddingY:1,width:s,children:(0,w.jsx)(a.KJ,{align:"center",lineClamp:2,size:"100",weight:"bold",children:S})})]})}),ei&&(0,w.jsxs)(r.Fragment,{children:[(0,w.jsx)(h.xe,{anchors:{[ei]:K.current},placementId:18,positionRelativeToAnchor:!1}),(0,w.jsx)(h.X$,{anchors:{[ei]:K.current},idealDirection:"down",onAnchorTouch:"complete",placementId:18,scrollToDismiss:!0})]})]})};function C(e){let{boardId:t,sectionId:i,iconSize:o,isBoardEmpty:r,toolSize:l,boardOrSectionToolsRef:d}=e,u=(0,c.A)(),{checkExperiment:_}=(0,n.A)(),p=!r&&_("web_collage_navigate_from_own_board").anyEnabled,{data:h}=(0,s.A)(d);if(!h||!h.length)return null;let f=h.filter(({tool:e})=>!u||2===e).filter(({tool:e})=>!r||2!==e).filter(({tool:e})=>p||6!==e).map(e=>6===e.tool?{...e,link:`/collage-creation-tool/?boardId=${t}${i?`&sectionId=${i}`:""}`}:e);return f.length?(0,w.jsx)(a.az,{"data-test-id":"board-tools",role:"list",children:(0,w.jsx)(a.so,{alignItems:"start",justifyContent:"center",width:"100%",children:f.map((e,r)=>(0,w.jsx)(a.az,{"data-test-id":e.text,padding:1,role:"listitem",children:(0,w.jsx)(B,{boardId:t,boardSectionId:i,boardTool:e,iconSize:o,index:r,toolSize:l})},e.id))})}):null}function S(e){(0,r.useEffect)(()=>{(0,o.A)("BoardToolsContainer","/app/www/save/board/BoardTools/BoardToolsContainer.tsx")},[]);let{sectionId:t,boardId:i}=e,a=(0,c.A)(),n=!!t,{ref:s}=(0,d.A)({name:n?"SectionToolsFeedResource":"BoardToolsFeedResource",options:n?{sectionId:t,orbacSubjectId:a}:{boardId:i,orbacSubjectId:a}});return(0,w.jsx)(l.A,{name:"BoardToolsContainer_ResourceError",children:(0,w.jsx)(r.Suspense,{fallback:(0,w.jsx)(u.A,{}),children:(0,w.jsx)(C,{...e,boardOrSectionToolsRef:s})})})}B.displayName="BoardTool"},352316(e,t,i){i.d(t,{A:()=>o});let o=(0,i(859471).createContext)({showAbout:!1,setShowAbout:()=>{}})},278105(e,t,i){i.d(t,{A:()=>h});var o=i(61163),r=i(859471),a=i(963522),l=i(586733),n=i(296221),s=i(538329),d=i(584342),c=i(564533),u=i(832773),_=i(845754),p=i(562615);function h({board:e,hasBoardToolStyles:t,onArchiveClick:i,onCreatePincode:h,onEditBoardClick:f,onEditSectionClick:m,onMergeClick:b,onShowAbout:g,onUnarchiveClick:A,showArchiveOnly:y=!1,showCreatePinCodeOption:x,surface:v,excludeShareOption:w,size:j="sm",bgColor:P="secondary"}){(0,r.useEffect)(()=>{(0,o.A)("BoardHeaderOverflowFlyoutButton","/app/www/save/board/Headers/BoardHeader/BoardHeaderOverflowFlyoutButton.tsx")},[]);let B=(0,s.A)(),C=(0,r.useRef)(null),{logContextEvent:S}=(0,l.o)(),[z,I]=(0,r.useState)(!1),[E,O]=(0,r.useState)("boardOptions"),[T,F]=(0,r.useState)(!1),k=e.header?.large_image_url?"default":"secondary";k=T?void 0:k;let D="automagical"===e.layout,M=()=>{I(!1),O("boardOptions")},R={description:e.description,id:e.id,imageUrl:e.image_cover_url,name:e.name,type:"board",url:e.url,ownerId:e.owner?.id},L=()=>{I(e=>!e),O("boardOptions")},N=!!e.archived_by_me_at,H=["section"===v?function({handleClose:e,onEditClick:t,setMenuType:i},o,r){return{items:[{dataTestId:"edit-section-button",text:o._('Edit Section', 'BoardHeader.getSectionOptionsCategory.EditOption', 'Clickable text to enter board editing mode'),onClick:()=>{t(),e()}},{text:o._('Share', 'BoardHeader.getSectionOptionsCategory.ShareOption', 'Clickable text to show share options'),onClick:()=>{(0,c.A)(r),i("boardShare")}}],label:o._('Section options', 'BoardHeader.getSectionOptionsCategory.OptionsCategory', 'Category of section options in section flyout')}}({handleClose:M,onEditClick:m,setMenuType:O},B,S):function({handleClose:e,isArchived:t,isAutomagical:i,onArchiveClick:o,onCreatePincode:r,onEditClick:a,onMergeClick:l,onShowAbout:n,onUnarchiveClick:s,setMenuType:d,showCreatePinCodeOption:u,isAdOnlyPins:_,excludeShareOption:p},h,f,m){let b=[];return i?b.push({dataTestId:"aboutRecommendationsButton",text:h._('About boards made for you', 'BoardHeader.BoardOptionsFlyout.AboutBoardsForYouOption', 'Clickable text to open about boards made for you modal'),onClick:()=>{n?.(),e()}}):(m||b.push({dataTestId:"editBoardButton",text:h._('Edit board', 'BoardHeader.BoardOptionsFlyout.EditOption', 'Clickable text to enter board editing mode'),onClick:()=>{a(),e()}}),p||b.push({dataTestId:"shareBoardButton",text:h._('Share', 'BoardHeader.BoardOptionsFlyout.ShareOption', 'Clickable text to show share options'),onClick:()=>{(0,c.A)(f),d("boardShare")}}),_||t||b.push({dataTestId:"mergeBoardButton",text:h._('Merge', 'BoardHeader.BoardOptionsFlyout.MergeOption', 'Clickable text to open merge board modal'),onClick:()=>{l(),e()}}),t?b.push({dataTestId:"unarchiveBoardButton",text:h._('Unarchive', 'BoardHeader.BoardOptionsFlyout.UnarchiveOption', 'Clickable text to open unarchive modal'),onClick:()=>{s(),e()}}):b.push({dataTestId:"archiveBoardButton",text:h._('Archive', 'BoardHeader.BoardOptionsFlyout.ArchiveOption', 'Clickable text to open archive modal'),onClick:()=>{o(),e()}}),u&&!m&&b.push({dataTestId:"createPinCodeBoardButton",text:h._('Create Pincode', 'BoardHeader.BoardOptionsFlyout.PincodeOption', 'Clickable text to trigger Pincode modal'),onClick:()=>{r(),e()}})),{items:b,label:h._('Board options', 'BoardHeader.BoardOptionsFlyout.OptionsCategory', 'Category of board options in board flyout')}}({handleClose:M,isArchived:N,isAutomagical:D,onArchiveClick:i,onCreatePincode:h,onEditClick:f,onMergeClick:b,onShowAbout:g,onUnarchiveClick:A,setMenuType:O,showCreatePinCodeOption:x,isAdOnlyPins:e.is_ads_only,excludeShareOption:w},B,S,y)];return(0,p.jsxs)(a.az,{position:"relative",zIndex:new a.rk(d.d1-1),children:[(0,p.jsx)(a.az,{ref:C,"data-test-id":"more-board-options",children:t?(0,p.jsx)(a.Rp,{onTap:L,rounding:600,children:(0,p.jsx)(a.az,{color:z?"selected":k,dangerouslySetInlineStyle:T?{__style:{backgroundColor:"#e2e2e2"}}:void 0,display:"flex",justifyContent:"center",onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),paddingX:5,paddingY:5,rounding:600,children:(0,p.jsx)(a.In,{accessibilityLabel:"more options",color:z?"inverse":"default",icon:"ellipsis",size:24})})}):(0,p.jsx)(a.K0,{accessibilityLabel:B._('More Board options', 'BoardHeaderOVerflowFlyoutButton.IconButton.AccessibilityLabel', 'Accessibility label on icon button'),bgColor:P,icon:"ellipsis",iconColor:"default",onClick:L,selected:z,size:j})}),(0,p.jsx)(n.xe,{anchors:{3001:C.current},onCompleteByAnchor:{3001:L},placementId:18}),(0,p.jsx)(n.X$,{anchors:{3001:C.current},idealDirection:"down",onAnchorTouch:"complete",placementId:18,scrollToDismiss:!0}),z&&("boardOptions"===E?(0,p.jsx)(a.ms,{anchor:C.current,disableMobileUI:!0,id:"board_options",onDismiss:M,zIndex:_.u$,children:H.map(({items:e,label:t})=>(0,p.jsx)(a.ms.Section,{label:t,children:e.map(({dataTestId:e,isSelected:t,onClick:i,text:o})=>(0,p.jsx)(a.ms.Item,{dataTestId:e,onSelect:i,option:{label:o,value:o},selected:t?{label:o,value:o}:null},o))},t))}):(0,p.jsx)(a.AM,{anchor:C.current,onDismiss:M,size:"flexible",children:(0,p.jsx)(u.A,{component:13216,onCreatePincodeClick:h,onHide:M,sendShareSurface:5,sendType:"board",sharedObject:R,viewType:5})}))]})}},373865(e,t,i){i.d(t,{A:()=>D});var o=i(61163),r=i(859471),a=i(963522),l=i(914296),n=i(369757),s=i(57302),d=i(989457),c=i(538329),u=i(709724),_=i(59923),p=i(787535),h=i(207295),f=i(435175),m=i(112400),b=i(106386),g=i(586733),A=i(948641),y=i(693154),x=i(706466),v=i(955170),w=i(562615);function j(e){(0,r.useEffect)(()=>{(0,o.A)("ButtonElement","/app/www/save/board/JoinButton/ButtonElement.tsx")},[]);let t=(0,c.A)(),{onClick:i,requested:l,size:n,useAlternateText:s}=e;return(0,w.jsx)(a.$n,{fullWidth:!0,onClick:i,size:n||"md",text:(l?function(e,t){return t?e._('Cancel', 'BoardPage.BoardJoinButton.cancel', '[Button] Cancel request to join a group board as a collaborator'):e._('Cancel request', '[Button] Cancel request to join a group board as a collaborator', '[Button] Cancel request to join a group board as a collaborator')}:function(e,t){return t?e._('Join', 'BoardPage.BoardJoinButton.join', '[Button] Request to join a group board as a collaborator'):e._('Request to join', '[Button] Request to join a group board as a collaborator', '[Button] Request to join a group board as a collaborator')})(t,s)})}var P=i(567176),B=i(542975);function C(e){(0,r.useEffect)(()=>{(0,o.A)("JoinCancelToast","/app/www/save/board/JoinButton/JoinCancelToast.tsx")},[]);let t=(0,c.A)(),{boardImage:i,boardName:l,boardUrl:n,onHide:s}=e,d=(0,w.jsx)(a.KJ,{children:(0,B.vQ)(t._('You\'ve cancelled the request to collaborate on {{ boardName }}', 'Board.JoinButton.CancelToast', 'Toast text stating that a user has cancelled a request to join a board'),{boardName:(0,w.jsx)(a.KJ,{inline:!0,weight:"bold",children:l})})});return(0,w.jsx)(P.A,{duration:3e3,href:n,imageUrl:i,onHide:s,text:d})}function S(e){(0,r.useEffect)(()=>{(0,o.A)("JoinRequestToast","/app/www/save/board/JoinButton/JoinRequestToast.tsx")},[]);let t=(0,c.A)(),{boardImage:i,boardName:l,boardUrl:n,onHide:s}=e,d=(0,w.jsx)(a.KJ,{children:(0,B.vQ)(t._('You\'ve requested to join {{ boardName }}', 'Board.JoinButton.RequestToast', 'Toast text stating that a user has requested to join a board'),{boardName:(0,w.jsx)(a.KJ,{inline:!0,weight:"bold",children:l})})});return(0,w.jsx)(P.A,{href:n,imageUrl:i,onHide:s,text:d})}function z(e){let{boardId:t,boardImage:i,boardName:o,boardUrl:r,isRequestedByMe:l,showPulsar:n,size:s,variant:d}=e,{logContextEvent:c}=(0,g.o)(),u=(0,b.wA)(),_=(0,y.A)(),p=(0,x.CG)(),h=_.isAuth&&_.id||"",f=(0,A.A)(),m=(0,v.z1)(),P=({event:e})=>{e.preventDefault(),e.stopPropagation(),f?f():l?(u((0,v.z$)(t,h)),p.showOneToast(({hideToast:e})=>(0,w.jsx)(C,{boardImage:i,boardName:o,boardUrl:r,onHide:e}))):(u(m(t)),p.showOneToast(({hideToast:e})=>(0,w.jsx)(S,{boardImage:i,boardName:o,boardUrl:r,onHide:e}))),function(e){let{action:t,id:i,logContextEvent:o,url:r}=e;o({event_type:101,component:1,element:"request"===t?7499:7547,object_id_str:i,view_type:4,aux_data:{current_page_url:r}})}({action:l?"request":"cancel",id:t,logContextEvent:c,url:r})};return h?(0,w.jsxs)(a.az,{display:"flex",position:"relative",children:[(0,w.jsx)(j,{onClick:P,requested:l,size:s,useAlternateText:"lego"===d}),n&&(0,w.jsx)(a.Rp,{onTap:e=>{P(e)},children:(0,w.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{marginLeft:-86,marginTop:-28}},display:"inlineBlock",position:"absolute",children:(0,w.jsx)(a.EV,{paused:l})})})]}):null}var I=i(280027);function E({board:e,boardName:t,collaborators:i,isArchived:l,isBoardPreviewMode:n,isSecret:b,nonDisplayedCollaboratorCount:g,pinCount:A,sectionCount:y,description:x,showPinCount:v,showPulsar:j,showJoinButton:P,isOwnerOrCollaborator:B,handleShowCollabAndPermissionsModal:C}){(0,r.useEffect)(()=>{(0,o.A)("BoardHeaderDetails","/app/www/save/board/Headers/BoardHeader/BoardHeaderDetails/BoardHeaderDetails.tsx")},[]);let S=(0,c.A)(),{automagical_board_metadata:E,featured_board_metadata:O,id:T,image_cover_url:F,layout:k,owner:D={},should_show_board_collaborators:M,url:R,viewer_collaborator_join_requested:L}=e,{curator:N,is_sponsored_content:H}=O||{},{board_type:U,tag_title:$,tagline:J,topic_name:q,upcoming_update_date_text:K}=E||{},G=H&&N?(0,s.A)(N):null,W=(0,I.A)(e),Y=B&&!n,V="automagical"===k,Q=M&&i.length>1,X=(0,r.useMemo)(()=>{let e=[];return N?e.push((0,s.A)(N)):Q?e.push(...i):D&&e.push((0,s.A)(D)),e},[Q,i,N,D]),Z=O?.board_tag;return(0,w.jsxs)(a.so,{alignItems:"start",dataTestId:"board-header-details",direction:"column",gap:6,justifyContent:"start",maxWidth:640,children:[(0,w.jsxs)(a.so,{alignItems:"start",direction:"column",gap:3,justifyContent:"start",children:[(()=>{let{board_subtitle:e}=O||{};return e?(0,w.jsx)(a.az,{marginBottom:-1,children:(0,w.jsx)(a.KJ,{weight:"bold",children:e})}):null})(),(0,w.jsx)(a._Y,{id:"board-name",size:"700",children:t}),(0,w.jsx)(f.A,{fontSize:"200",isArchived:l,isAutomagical:V,isFeaturedBoard:W,isSecret:b,pinCount:A,sectionCount:y,showEditorialBoardTag:"number"==typeof Z&&Z>=0,showPinCount:v,subtitle:2===U?J:K,tagTitle:$}),!!x&&(0,w.jsx)(u.A,{description:x,topicName:q})]}),!V&&(0,w.jsxs)(r.Fragment,{children:[Y&&(0,w.jsx)(a.az,{marginBottom:2,children:(0,w.jsx)(d.Z7,{addCollaborators:!0,collaborators:X,onClick:C,role:"button",size:"sm"})}),Y&&(0,w.jsx)(p.A,{boardId:T,iconSize:24,isBoardEmpty:!A,toolSize:72}),!Y&&G&&(0,w.jsx)(h.A,{board:e,collaborator:(()=>{if(Q&&G)return i.find(e=>e.id!==G.id)})(),sponsor:G}),!Y&&!G&&(0,w.jsxs)(a.so,{alignItems:"center",dataTestId:"collaborator-avatar-group-and-names-container",gap:2,children:[(0,w.jsx)(_.A,{avatarSize:"sm",board:e,displayedCollaborators:X,isBoardPreviewMode:n,nonDisplayedCollaboratorCount:g}),(0,w.jsxs)(a.KJ,{children:[S._('by ', 'board.Headers.BoardHeader.BoardHeaderDetails.by', 'Text to tell the viewer who the board is owned and collaborated by'),(0,w.jsx)(m.A,{board:e,collaborators:X,overflowNumber:g})]})]})]}),P&&(0,w.jsx)(z,{boardId:T,boardImage:F??"",boardName:t,boardUrl:R,isRequestedByMe:!!L,showPulsar:j,size:"lg",variant:"lego"})]})}var O=i(985471),T=i(564362),F=i(261682),k=i(376795);function D({board:e,boardName:t,collaborators:i,description:s,fullWidth:d=!1,handleShowCollabAndPermissionsModal:c,isArchived:u,isBoardPreviewMode:_,inRelocateBoardShareButtonExp:p,isOwnerOrCollaborator:h,isSecret:f,nonDisplayedCollaboratorCount:m,onCreatePincode:b,overFlowActionsButton:g,pinCount:A,sectionCount:y,setBoardPreviewMode:x,showPinCount:v,showPulsar:j,showJoinButton:P}){(0,r.useEffect)(()=>{(0,o.A)("BoardHeaderWithImage","/app/www/save/board/Headers/BoardHeader/BoardHeaderWithImage.tsx")},[]);let{featured_board_metadata:B,layout:C,header:S,owner:z}=e,{isSmallerImage:I,isSmallScreen:D}=(0,k.A)(),M=(0,n.A)(z?.id),R="automagical"===C,L=S?.large_image_url||null,N=B?.has_expanded_sections&&M&&x,H=()=>(0,w.jsxs)(a.so,{dataTestId:"board-actions-container",gap:2,children:[N&&!R&&(0,w.jsx)(T.A,{isBoardPreviewMode:_,setBoardPreviewMode:x}),!f&&!R&&(0,w.jsx)(F.A,{boardKey:{type:"Legacy",data:e},color:L?"default":"secondary",handleCreatePincode:b,hasBoardToolStyles:p,hasShadow:!!L,iconColor:"default",showTooltip:p}),(0,w.jsx)(a.az,{marginEnd:4,children:g})]}),U=()=>(0,w.jsx)(E,{board:e,boardName:t,collaborators:i,description:s,handleShowCollabAndPermissionsModal:c,isArchived:u,isBoardPreviewMode:_,isOwnerOrCollaborator:h,isSecret:f,nonDisplayedCollaboratorCount:m,pinCount:A,sectionCount:y,showJoinButton:P,showPinCount:v,showPulsar:j}),$=()=>L?(0,w.jsx)(O.A,{boardActions:H(),imageUrl:L,imageWidth:I?k.W:void 0}):H(),J=(0,w.jsxs)(a.so,{alignItems:D||!L||h&&!_?"start":"center",dataTestId:"board-header-with-image",direction:D&&L?"column":"row",gap:8*!!L,justifyContent:"between",children:[(0,w.jsx)(a.az,{children:D&&L?$():U()}),(0,w.jsx)(a.az,{maxWidth:D?550:void 0,children:D&&L?U():$()})]});return d?(0,w.jsx)(a.az,{paddingX:1,width:"100%",children:J}):(0,w.jsx)(l.A,{isGetServerRenderGridHeaderStyles:!0,maxColumns:5,children:J})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/82356-c4036422ca4e7b23.mjs.map